<?xml version="1.0" encoding="UTF-8"?>
<form xmlns="http://www.w3.org/2002/06/xhtml2" xmlns:ix="http://itensil.com/ns/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:exf="http://www.exforms.org/exf/1-0" xmlns:xf="http://www.w3.org/2002/xforms"><xf:model id="fmodel"><xf:instance id="ins"><data xmlns=""></data></xf:instance><xf:instance id="main"><data xmlns=""></data></xf:instance><xf:instance id="meta"><data xmlns=""></data></xf:instance><xf:instance id="cats"><data xmlns=""></data></xf:instance><xf:instance id="review"><data xmlns=""></data></xf:instance><xf:instance id="form"><data xmlns=""><form updatedBy="" updated="" createdBy="" created=""/><tempRevIndex>-1</tempRevIndex><tempSugIndex>1</tempSugIndex><searchText/><searchAddNew/><records/><fullSearchText/><fullSearchRecords/><col1/><col2/><col3/><document/><temp/><comp uri=""/></data></xf:instance><xf:instance id="bootstrap"><data xmlns=""><js>/resources/services/appForms/main.js</js></data></xf:instance><xf:instance id="config"><data xmlns=""></data></xf:instance><script ev:event="xforms-model-construct-done">
      bootstrapSharedXfrm(model);
      model.Frm = new appForm(model, "fr_summary");
      
        //model.Frm.loadAppFile('ins', "/finalrep.xml", "1");
        model.Frm.loadOpFile('ins', model.Frm.formSet.getRoot().__COMPREVURI, "1");model.Frm.loadAppFile('main', "/data/irb.xml", "0");model.Frm.loadAppFile('meta', "/data/projectData.xml", "0");model.Frm.loadAppFile('cats', "/data/catagories.xml", "0");
        model.Frm.loadOpFile('review', model.Frm.formSet.getRoot().__COMPREVURI, "1");
      
      model.Frm.loadMetaData();
      
      
        includeSharedJS("/resources/applications/IRB/js/clientSideFunctions.js");
        model.USA = new irbProtocol(model);
      
      model.refresh();
      model.rebuild();
      model.recalculate();
      <script ev:event="xforms-value-changed">
          //model.USA.registerChangeLog('review', '1')
          //model.USA.registerChangeLog('ins', '1')
          model.USA.registerChangeLog('comments', '1')
        </script></script><script ev:event="xforms-ready"/><xf:submission instance="ins" id="submitins" replace="none" method="put"><xf:action ev:event="xforms-submit-done"/><xf:action ev:event="xforms-submit-error"><xf:message level="ephemeral">Problem saving (ins)</xf:message></xf:action></xf:submission><xf:submission instance="review" id="submitreview" replace="none" method="put"><xf:action ev:event="xforms-submit-done"/><xf:action ev:event="xforms-submit-error"><xf:message level="ephemeral">Problem saving (review)</xf:message></xf:action></xf:submission><xf:bind relevant="true()" readonly="false()" nodeset="instance(ins)//*"/><xf:bind relevant="true()" readonly="false()" nodeset="instance(main)//*"/><xf:bind relevant="true()" readonly="false()" nodeset="instance(meta)//*"/><xf:bind relevant="true()" readonly="false()" nodeset="instance(cats)//*"/><xf:bind readonly="true()" nodeset="//link/@title"/><xf:bind nodeset="instance('form')/document" type="ix:file"/><xf:bind readonly="true()" relevant="false()" nodeset="instance('main')/laysummary"/><xf:bind readonly="true()" nodeset="instance('ins')/publicationElement/@document" type="ix:file"/><xf:bind readonly="true()" nodeset="instance('ins')/publicationElement/@date" type="xsd:date"/></xf:model><style>
          div.formFrame div.commentBox{
          background-color:white;
          border: 2px solid gray;
          padding: 5px;
          width: 500px;
          }
          
          div.formFrame div.commentBox div.xfctrl{
          background-color:white;
          }
          
          div.formFrame div.commentBox div.xfctrl label{
          width:100px;
          }
          
          div.formFrame div.commentBox div.xfctrl textarea{
          width:390px;
          }
          
          
          div.formFrame td.custError{
          background-color:white;
          border:none;
          vertical-align:top;
          width:200px;
          padding-left:10px;
          color:red;
          font-weight:bold;
          }
          
          div.formFrame td.custError div.xfctrl tr{
          background-color:white;
          }
          
          div.formFrame td.custError div.xfctrl tr td{
          background-color:white;
          }
          
          div.formFrame tr td.custError div.xfctrl{
          background-color:white;
          }
          
          div.formFrame td.custError div{
          background-color:white;
          }
          
          div.formFrame td.custError .xfctrl{
          background:none;
          }
          
          div.formFrame table.fullColLayout tr td.custError div.xfctrl{
          background-color:white;
          }
          
          
          .wikiView div.formFrame table.fullColLayout tr td.custError div.xfctrl textarea {
          margin-top:10px;
          }
          
          .wikiView div.formFrame table.fullColLayout tr td.custError div.xfctrl {
            position:static;
            border-color:white;
          }
          div.formFrame tr td.custError div.xfctrl{
            position:static;
            border-color:white;
          }          
          
          .wikiView div.formFrame table.basicColLayout tr td.custError div.xfctrl textarea  {
            margin-top:10px;
          }
          
        </style><ix:template name="QuickSearch"><div style="padding:8px;width:400px"><table style="width:240px"><tr><td><xf:input id="searchBox" ref="instance('form')/searchText" style="width:140px"><xf:label style="width:50px">Lookup:</xf:label></xf:input></td><td><div style="margin-right:20px;"><u class="link" style="color:blue;cursor:pointer;text-decoration:underline;">Go</u><script ev:event="click">
                  model.Frm.executeQuickSearch();  
                </script></div></td></tr></table><hr/><xf:switch><xf:case exf:if="1" id="hide-quicksearch"/><xf:case id="show-quicksearch"><exf:variable name="records" value="instance('form')/records//rec"/><div><ix:attr name="style" value="if(count($records)=0, '', 'display:none')"/><h1>No Matches</h1></div><div><ix:attr value="if(count($records) &gt; 50, '', 'display:none')" name="style"/><h1>Too Many Matches</h1>Please refine your search.</div><table class="quickSearchMatches"><ix:attr value="if(count($records) &lt;= 50 and count($records) &gt; 0, '', 'display:none')" name="style"/><tr><th style="text-align:left;"><xf:output value="instance('form')/col1"/></th><th style="text-align:left;padding-left:20px"><xf:output value="instance('form')/col2"/></th><th style="text-align:left;padding-left:20px"><xf:output value="instance('form')/col3"/></th></tr><xf:repeat nodeset="$records"><tr><td style="vertical-align:top; width:33%"><u class="clickable"><xf:output value="(attribute::node())[position()=script('SH.is_ie ? 4 : 3')]"/><xf:close ev:event="click"/><script ev:event="click"> 
                              var indx = model.getValue("@id", contextNode);
                              var val = model.getValue("@name", contextNode);
                              if(val == "") val = model.getValue("(attribute::node())[position()=script('SH.is_ie ? 4 : 3')]", contextNode);
                              model.Frm.quickSearchSelect(indx, val);
                              var code = model.Frm.quickSearch.code;
                              if(code) eval(code);
                              if(model.Frm.quickSearch.save) model.Frm.saveAll();
                              event.stopPropagation();
                            </script></u></td><td style="vertical-align:top;padding-left:20px; width:30%"><xf:output value="if(instance('form')/col2 and instance('form')/col2 != '', (attribute::node())[position()=script('SH.is_ie ? 3 : 2')], '')"/></td><td style="vertical-align:top;padding-left:20px; width:30%"><xf:output value="if(instance('form')/col3 and instance('form')/col3 != '', (attribute::node())[position()=script('SH.is_ie ? 2 : 1')], '')"/></td></tr></xf:repeat></table><br/><br/></xf:case></xf:switch></div></ix:template><div class="formFrame" id="allcontrols"><div style="display:none;"><xf:input id="documentDrop" ref="instance('form')/document"><xf:action ev:event="xforms-value-changed" exf:if="instance('form')/document != ''"><script> 
                var n = model.getValue(".", contextNode);
                if(n != "") model.Frm.linkFile(n);
              </script></xf:action></xf:input></div><table class="formMetaLine"><tr/></table><div class="body"><h1/><table class="basicColLayout"><tr class="bigbox"><td class="component textarea   widenLabel"><exf:variable value="instance('main')/laysummary/@revIndex" name="revIndexlay"/><exf:variable value="(instance('main')/laysummary[@revIndex=$revIndexlay])" name="thisNodeNeedlelay"/><exf:variable value="instance('main')/laysummary" name="thisNodelay"/><exf:variable value="(instance('main')/original/laysummary[@revIndex=$revIndexlay])" name="orgNodelay"/><exf:variable value="(instance('main')/suggestions/laysummary[@revIndex=$revIndexlay])" name="sugNodeSetlay"/><exf:variable value="(instance('main')/suggestions/laysummary[@revIndex=$revIndexlay])" name="sugNodelay"/><exf:variable value="instance('main')/previous/review/laysummary/@revIndex" name="revIndexOlay"/><exf:variable value="(instance('main')/previous/review/laysummary[@revIndex=$revIndexOlay])" name="thisNodeNeedleOldlay"/><exf:variable value="instance('main')/previous/review/laysummary" name="thisNodeOldlay"/><exf:variable value="(instance('main')/previous/review/original/laysummary[@revIndex=$revIndexOlay])" name="orgNodeOldlay"/><exf:variable value="(instance('main')/previous/review/suggestions/laysummary[@revIndex=$revIndexOlay])" name="sugNodeSetOldlay"/><exf:variable value="(instance('main')/previous/review/suggestions/laysummary[@revIndex=$revIndexOlay])" name="sugNodeOldlay"/><xf:textarea style="height:10em;" class="" ref="instance('main')/laysummary"><xf:label>Protocol Lay Summary</xf:label><xf:action exf:if="$thisNodeNeedlelay/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedlelay/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:textarea></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlelay/@req = 'change' or $thisNodeNeedlelay/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlelay/@justification='' and $sugNodelay != $thisNodelay, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlelay/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlelay/@justification='' and $sugNodelay != $thisNodelay, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlelay/@justification!='' and $sugNodelay != $thisNodelay, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlelay/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlelay/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('main')/laysummary", "", tempRevIndex, "fill", 'org', "", "lay", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodelay"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlelay/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlelay/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('main')/laysummary", "", tempRevIndex, "fill", 'sug', "", "lay", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodelay"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodelay != $thisNodelay, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlelay/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlelay/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlelay/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlelay/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlelay/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlelay/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlelay/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlelay/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodelay != $orgNodelay and $thisNodeNeedlelay/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="yesnobuttons"><td class="component   widestLabel"><exf:variable value="instance('ins')/studyObjectivesAttained/@revIndex" name="revIndexstudyObjectivesAttained"/><exf:variable value="(instance('ins')/studyObjectivesAttained[@revIndex=$revIndexstudyObjectivesAttained])" name="thisNodeNeedlestudyObjectivesAttained"/><exf:variable value="instance('ins')/studyObjectivesAttained" name="thisNodeVstudyObjectivesAttained"/><exf:variable value="if($thisNodeVstudyObjectivesAttained='1', 'Yes', if($thisNodeVstudyObjectivesAttained='0', 'No', ''))" name="thisNodestudyObjectivesAttained"/><exf:variable value="(instance('ins')/original/studyObjectivesAttained[@revIndex=$revIndexstudyObjectivesAttained])" name="orgNodeVstudyObjectivesAttained"/><exf:variable value="if($orgNodeVstudyObjectivesAttained='1', 'Yes', if($orgNodeVstudyObjectivesAttained='0', 'No', ''))" name="orgNodestudyObjectivesAttained"/><exf:variable value="(instance('ins')/suggestions/studyObjectivesAttained[@revIndex=$revIndexstudyObjectivesAttained])" name="sugNodeSetstudyObjectivesAttained"/><exf:variable value="(instance('ins')/suggestions/studyObjectivesAttained[@revIndex=$revIndexstudyObjectivesAttained])" name="sugNodeVstudyObjectivesAttained"/><exf:variable value="if($sugNodeVstudyObjectivesAttained='1', 'Yes', if($sugNodeVstudyObjectivesAttained='0', 'No', ''))" name="sugNodestudyObjectivesAttained"/><exf:variable value="instance('ins')/previous/review/studyObjectivesAttained/@revIndex" name="revIndexOstudyObjectivesAttained"/><exf:variable value="(instance('ins')/previous/review/studyObjectivesAttained[@revIndex=$revIndexOstudyObjectivesAttained])" name="thisNodeNeedleOldstudyObjectivesAttained"/><exf:variable value="instance('ins')/previous/review/studyObjectivesAttained" name="thisNodeVOldstudyObjectivesAttained"/><exf:variable value="if($thisNodeVOldstudyObjectivesAttained='1', 'Yes', if($thisNodeVOldstudyObjectivesAttained='0', 'No', ''))" name="thisNodeOldstudyObjectivesAttained"/><exf:variable value="(instance('ins')/previous/review/original/studyObjectivesAttained[@revIndex=$revIndexOstudyObjectivesAttained])" name="orgNodeVOldstudyObjectivesAttained"/><exf:variable value="if($orgNodeVOldstudyObjectivesAttained='1', 'Yes', if($orgNodeVOldstudyObjectivesAttained='0', 'No', ''))" name="orgNodeOldstudyObjectivesAttained"/><exf:variable value="(instance('ins')/previous/review/suggestions/studyObjectivesAttained[@revIndex=$revIndexOstudyObjectivesAttained])" name="sugNodeSetOldstudyObjectivesAttained"/><exf:variable value="(instance('ins')/previous/review/suggestions/studyObjectivesAttained[@revIndex=$revIndexOstudyObjectivesAttained])" name="sugNodeVOldstudyObjectivesAttained"/><exf:variable value="if($sugNodeVOldstudyObjectivesAttained='1', 'Yes', if($sugNodeVOldstudyObjectivesAttained='0', 'No', ''))" name="sugNodeOldstudyObjectivesAttained"/><table class="horizontalSelects"><tr><td class="yesBox"><xf:select1 ref="instance('ins')/studyObjectivesAttained" appearance="full" id="studyObjectivesAttained"><xf:label>Were the site study objectives attained?</xf:label><xf:item><xf:label>Yes</xf:label><xf:value>1</xf:value></xf:item></xf:select1></td><td class="noBox"><xf:select1 ref="instance('ins')/studyObjectivesAttained" appearance="full" id="studyObjectivesAttained"><xf:label/><xf:item><xf:label>No</xf:label><xf:value>0</xf:value></xf:item><script ev:event="xforms-value-changed">
                model.recalculate();
                model.rebuild();
                model.refresh();
              </script><script ev:event="xforms-value-changed">
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                  SH.print("first...");
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                </script><xf:action exf:if="$thisNodeNeedlestudyObjectivesAttained/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedlestudyObjectivesAttained/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:select1></td></tr></table></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlestudyObjectivesAttained/@req = 'change' or $thisNodeNeedlestudyObjectivesAttained/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlestudyObjectivesAttained/@justification='' and $sugNodestudyObjectivesAttained != $thisNodestudyObjectivesAttained, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlestudyObjectivesAttained/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlestudyObjectivesAttained/@justification='' and $sugNodestudyObjectivesAttained != $thisNodestudyObjectivesAttained, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlestudyObjectivesAttained/@justification!='' and $sugNodestudyObjectivesAttained != $thisNodestudyObjectivesAttained, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlestudyObjectivesAttained/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlestudyObjectivesAttained/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/studyObjectivesAttained", "", tempRevIndex, "fill", 'org', "", "studyObjectivesAttained", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodestudyObjectivesAttained"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlestudyObjectivesAttained/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlestudyObjectivesAttained/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/studyObjectivesAttained", "", tempRevIndex, "fill", 'sug', "", "studyObjectivesAttained", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodestudyObjectivesAttained"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodestudyObjectivesAttained != $thisNodestudyObjectivesAttained, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlestudyObjectivesAttained/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlestudyObjectivesAttained/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlestudyObjectivesAttained/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlestudyObjectivesAttained/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlestudyObjectivesAttained/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlestudyObjectivesAttained/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlestudyObjectivesAttained/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlestudyObjectivesAttained/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodestudyObjectivesAttained != $orgNodestudyObjectivesAttained and $thisNodeNeedlestudyObjectivesAttained/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="dropdown"><ix:attr value="if(instance('ins')/studyObjectivesAttained = '0', '', 'display:none')" name="style"/><td class="component  widenLabel "><exf:variable value="'sug'" name="sugNodeOldwhoTerminates"/><exf:variable value="'origin'" name="orgNodeOldwhoTerminates"/><exf:variable value="'body'" name="thisNodeOldwhoTerminates"/><exf:variable value="instance('ins')/whoTerminates/@revIndex" name="revIndexwhoTerminates"/><exf:variable value="(instance('ins')/whoTerminates[@revIndex=$revIndexwhoTerminates])" name="thisNodeNeedlewhoTerminates"/><exf:variable value="instance('ins')/whoTerminates" name="thisNodeVwhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$thisNodeVwhoTerminates]/@name" name="thisNodewhoTerminates"/><exf:variable value="(instance('ins')/original/whoTerminates[@revIndex=$revIndexwhoTerminates])" name="orgNodeVwhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$orgNodeVwhoTerminates]/@name" name="orgNodewhoTerminates"/><exf:variable value="(instance('ins')/suggestions/whoTerminates[@revIndex=$revIndexwhoTerminates])" name="sugNodeSetwhoTerminates"/><exf:variable value="(instance('ins')/suggestions/whoTerminates[@revIndex=$revIndexwhoTerminates])" name="sugNodeVwhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$sugNodeVwhoTerminates]/@name" name="sugNodewhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$sugNodeVwhoTerminates]/@name" name="sugNodewhoTerminates"/><exf:variable value="instance('ins')/previous/review/whoTerminates/@revIndex" name="revIndexOwhoTerminates"/><exf:variable value="(instance('ins')/previous/review/whoTerminates[@revIndex=$revIndexOwhoTerminates])" name="thisNodeNeedleOldwhoTerminates"/><exf:variable value="instance('ins')/previous/review/whoTerminates" name="thisNodeVOldwhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$thisNodeVOldwhoTerminates]/@name" name="thisNodeOldwhoTerminates"/><exf:variable value="(instance('ins')/previous/review/original/whoTerminates[@revIndex=$revIndexOwhoTerminates])" name="orgNodeVOldwhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$orgNodeVOldwhoTerminates]/@name" name="orgNodeOldwhoTerminates"/><exf:variable value="(instance('ins')/previous/review/suggestions/whoTerminates[@revIndex=$revIndexOwhoTerminates])" name="sugNodeSetOldwhoTerminates"/><exf:variable value="(instance('ins')/previous/review/suggestions/whoTerminates[@revIndex=$revIndexOwhoTerminates])" name="sugNodeVOldwhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$sugNodeVOldwhoTerminates]/@name" name="sugNodeOldwhoTerminates"/><exf:variable value="instance('cats')/terminatedBy/type[@id=$sugNodeVOldwhoTerminates]/@name" name="sugNodeOldwhoTerminates"/><xf:select1 ref="instance('ins')/whoTerminates"><xf:label>Study is being terminated by:</xf:label><xf:item><xf:label>-Select-</xf:label><xf:value/></xf:item><xf:repeat nodeset="instance('cats')/terminatedBy/type"><xf:item><xf:label><xf:output value="@name"/></xf:label><xf:value><xf:output value="@id"/></xf:value></xf:item></xf:repeat><xf:action exf:if="$thisNodeNeedlewhoTerminates/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedlewhoTerminates/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:select1></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlewhoTerminates/@req = 'change' or $thisNodeNeedlewhoTerminates/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlewhoTerminates/@justification='' and $sugNodewhoTerminates != $thisNodewhoTerminates, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlewhoTerminates/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlewhoTerminates/@justification='' and $sugNodewhoTerminates != $thisNodewhoTerminates, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlewhoTerminates/@justification!='' and $sugNodewhoTerminates != $thisNodewhoTerminates, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlewhoTerminates/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlewhoTerminates/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/whoTerminates", "", tempRevIndex, "fill", 'org', "", "whoTerminates", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodewhoTerminates"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlewhoTerminates/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlewhoTerminates/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/whoTerminates", "", tempRevIndex, "fill", 'sug', "", "whoTerminates", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodewhoTerminates"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodewhoTerminates != $thisNodewhoTerminates, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlewhoTerminates/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlewhoTerminates/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlewhoTerminates/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlewhoTerminates/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlewhoTerminates/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlewhoTerminates/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlewhoTerminates/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlewhoTerminates/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodewhoTerminates != $orgNodewhoTerminates and $thisNodeNeedlewhoTerminates/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="box"><ix:attr value="if(instance('ins')/studyObjectivesAttained = '0', '', 'display:none')" name="style"/><td class="component textarea   widenLabel"><exf:variable value="instance('ins')/reasonForTermination/@revIndex" name="revIndexreasonForTermination"/><exf:variable value="(instance('ins')/reasonForTermination[@revIndex=$revIndexreasonForTermination])" name="thisNodeNeedlereasonForTermination"/><exf:variable value="instance('ins')/reasonForTermination" name="thisNodereasonForTermination"/><exf:variable value="(instance('ins')/original/reasonForTermination[@revIndex=$revIndexreasonForTermination])" name="orgNodereasonForTermination"/><exf:variable value="(instance('ins')/suggestions/reasonForTermination[@revIndex=$revIndexreasonForTermination])" name="sugNodeSetreasonForTermination"/><exf:variable value="(instance('ins')/suggestions/reasonForTermination[@revIndex=$revIndexreasonForTermination])" name="sugNodereasonForTermination"/><exf:variable value="instance('ins')/previous/review/reasonForTermination/@revIndex" name="revIndexOreasonForTermination"/><exf:variable value="(instance('ins')/previous/review/reasonForTermination[@revIndex=$revIndexOreasonForTermination])" name="thisNodeNeedleOldreasonForTermination"/><exf:variable value="instance('ins')/previous/review/reasonForTermination" name="thisNodeOldreasonForTermination"/><exf:variable value="(instance('ins')/previous/review/original/reasonForTermination[@revIndex=$revIndexOreasonForTermination])" name="orgNodeOldreasonForTermination"/><exf:variable value="(instance('ins')/previous/review/suggestions/reasonForTermination[@revIndex=$revIndexOreasonForTermination])" name="sugNodeSetOldreasonForTermination"/><exf:variable value="(instance('ins')/previous/review/suggestions/reasonForTermination[@revIndex=$revIndexOreasonForTermination])" name="sugNodeOldreasonForTermination"/><xf:textarea class="" ref="instance('ins')/reasonForTermination"><xf:label>Reason for termination:</xf:label><xf:action exf:if="$thisNodeNeedlereasonForTermination/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedlereasonForTermination/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:textarea></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlereasonForTermination/@req = 'change' or $thisNodeNeedlereasonForTermination/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlereasonForTermination/@justification='' and $sugNodereasonForTermination != $thisNodereasonForTermination, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlereasonForTermination/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlereasonForTermination/@justification='' and $sugNodereasonForTermination != $thisNodereasonForTermination, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlereasonForTermination/@justification!='' and $sugNodereasonForTermination != $thisNodereasonForTermination, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlereasonForTermination/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlereasonForTermination/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/reasonForTermination", "", tempRevIndex, "fill", 'org', "", "reasonForTermination", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodereasonForTermination"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlereasonForTermination/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlereasonForTermination/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/reasonForTermination", "", tempRevIndex, "fill", 'sug', "", "reasonForTermination", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodereasonForTermination"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodereasonForTermination != $thisNodereasonForTermination, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlereasonForTermination/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlereasonForTermination/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlereasonForTermination/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlereasonForTermination/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlereasonForTermination/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlereasonForTermination/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlereasonForTermination/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlereasonForTermination/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodereasonForTermination != $orgNodereasonForTermination and $thisNodeNeedlereasonForTermination/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="box"><ix:attr value="if(instance('ins')/studyObjectivesAttained = '1', '', 'display:none')" name="style"/><td class="component textarea   widenLabel"><exf:variable value="instance('ins')/summaryOutcomes/@revIndex" name="revIndexsummaryOutcomes"/><exf:variable value="(instance('ins')/summaryOutcomes[@revIndex=$revIndexsummaryOutcomes])" name="thisNodeNeedlesummaryOutcomes"/><exf:variable value="instance('ins')/summaryOutcomes" name="thisNodesummaryOutcomes"/><exf:variable value="(instance('ins')/original/summaryOutcomes[@revIndex=$revIndexsummaryOutcomes])" name="orgNodesummaryOutcomes"/><exf:variable value="(instance('ins')/suggestions/summaryOutcomes[@revIndex=$revIndexsummaryOutcomes])" name="sugNodeSetsummaryOutcomes"/><exf:variable value="(instance('ins')/suggestions/summaryOutcomes[@revIndex=$revIndexsummaryOutcomes])" name="sugNodesummaryOutcomes"/><exf:variable value="instance('ins')/previous/review/summaryOutcomes/@revIndex" name="revIndexOsummaryOutcomes"/><exf:variable value="(instance('ins')/previous/review/summaryOutcomes[@revIndex=$revIndexOsummaryOutcomes])" name="thisNodeNeedleOldsummaryOutcomes"/><exf:variable value="instance('ins')/previous/review/summaryOutcomes" name="thisNodeOldsummaryOutcomes"/><exf:variable value="(instance('ins')/previous/review/original/summaryOutcomes[@revIndex=$revIndexOsummaryOutcomes])" name="orgNodeOldsummaryOutcomes"/><exf:variable value="(instance('ins')/previous/review/suggestions/summaryOutcomes[@revIndex=$revIndexOsummaryOutcomes])" name="sugNodeSetOldsummaryOutcomes"/><exf:variable value="(instance('ins')/previous/review/suggestions/summaryOutcomes[@revIndex=$revIndexOsummaryOutcomes])" name="sugNodeOldsummaryOutcomes"/><xf:textarea class="" ref="instance('ins')/summaryOutcomes"><xf:label>Summarize the study outcomes and findings:</xf:label><xf:action exf:if="$thisNodeNeedlesummaryOutcomes/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedlesummaryOutcomes/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:textarea></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlesummaryOutcomes/@req = 'change' or $thisNodeNeedlesummaryOutcomes/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlesummaryOutcomes/@justification='' and $sugNodesummaryOutcomes != $thisNodesummaryOutcomes, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlesummaryOutcomes/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlesummaryOutcomes/@justification='' and $sugNodesummaryOutcomes != $thisNodesummaryOutcomes, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlesummaryOutcomes/@justification!='' and $sugNodesummaryOutcomes != $thisNodesummaryOutcomes, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlesummaryOutcomes/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlesummaryOutcomes/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/summaryOutcomes", "", tempRevIndex, "fill", 'org', "", "summaryOutcomes", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodesummaryOutcomes"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlesummaryOutcomes/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlesummaryOutcomes/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/summaryOutcomes", "", tempRevIndex, "fill", 'sug', "", "summaryOutcomes", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodesummaryOutcomes"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodesummaryOutcomes != $thisNodesummaryOutcomes, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlesummaryOutcomes/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlesummaryOutcomes/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlesummaryOutcomes/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlesummaryOutcomes/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlesummaryOutcomes/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlesummaryOutcomes/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlesummaryOutcomes/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlesummaryOutcomes/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodesummaryOutcomes != $orgNodesummaryOutcomes and $thisNodeNeedlesummaryOutcomes/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="yesnobuttons"><ix:attr value="if(not(instance('main')/exempt[.='1']) and (instance('main')/invDrugs = '1' or instance('main')/invDevices = '1'), '', 'display:none')" name="style"/><td class="component   widestLabel"><exf:variable value="instance('ins')/fdaApproval/@revIndex" name="revIndexfdaApproval"/><exf:variable value="(instance('ins')/fdaApproval[@revIndex=$revIndexfdaApproval])" name="thisNodeNeedlefdaApproval"/><exf:variable value="instance('ins')/fdaApproval" name="thisNodeVfdaApproval"/><exf:variable value="if($thisNodeVfdaApproval='1', 'Yes', if($thisNodeVfdaApproval='0', 'No', ''))" name="thisNodefdaApproval"/><exf:variable value="(instance('ins')/original/fdaApproval[@revIndex=$revIndexfdaApproval])" name="orgNodeVfdaApproval"/><exf:variable value="if($orgNodeVfdaApproval='1', 'Yes', if($orgNodeVfdaApproval='0', 'No', ''))" name="orgNodefdaApproval"/><exf:variable value="(instance('ins')/suggestions/fdaApproval[@revIndex=$revIndexfdaApproval])" name="sugNodeSetfdaApproval"/><exf:variable value="(instance('ins')/suggestions/fdaApproval[@revIndex=$revIndexfdaApproval])" name="sugNodeVfdaApproval"/><exf:variable value="if($sugNodeVfdaApproval='1', 'Yes', if($sugNodeVfdaApproval='0', 'No', ''))" name="sugNodefdaApproval"/><exf:variable value="instance('ins')/previous/review/fdaApproval/@revIndex" name="revIndexOfdaApproval"/><exf:variable value="(instance('ins')/previous/review/fdaApproval[@revIndex=$revIndexOfdaApproval])" name="thisNodeNeedleOldfdaApproval"/><exf:variable value="instance('ins')/previous/review/fdaApproval" name="thisNodeVOldfdaApproval"/><exf:variable value="if($thisNodeVOldfdaApproval='1', 'Yes', if($thisNodeVOldfdaApproval='0', 'No', ''))" name="thisNodeOldfdaApproval"/><exf:variable value="(instance('ins')/previous/review/original/fdaApproval[@revIndex=$revIndexOfdaApproval])" name="orgNodeVOldfdaApproval"/><exf:variable value="if($orgNodeVOldfdaApproval='1', 'Yes', if($orgNodeVOldfdaApproval='0', 'No', ''))" name="orgNodeOldfdaApproval"/><exf:variable value="(instance('ins')/previous/review/suggestions/fdaApproval[@revIndex=$revIndexOfdaApproval])" name="sugNodeSetOldfdaApproval"/><exf:variable value="(instance('ins')/previous/review/suggestions/fdaApproval[@revIndex=$revIndexOfdaApproval])" name="sugNodeVOldfdaApproval"/><exf:variable value="if($sugNodeVOldfdaApproval='1', 'Yes', if($sugNodeVOldfdaApproval='0', 'No', ''))" name="sugNodeOldfdaApproval"/><table class="horizontalSelects"><tr><td class="yesBox"><xf:select1 ref="instance('ins')/fdaApproval" appearance="full" id="fdaApproval"><xf:label>Since the last IRB review, has the FDA approved any of the Drugs/Devices/Biologics used in this study or approved the investigational use?</xf:label><xf:item><xf:label>Yes</xf:label><xf:value>1</xf:value></xf:item></xf:select1></td><td class="noBox"><xf:select1 ref="instance('ins')/fdaApproval" appearance="full" id="fdaApproval"><xf:label/><xf:item><xf:label>No</xf:label><xf:value>0</xf:value></xf:item><script ev:event="xforms-value-changed">
                model.recalculate();
                model.rebuild();
                model.refresh();
              </script><script ev:event="xforms-value-changed">
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                  SH.print("first...");
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                </script><xf:action exf:if="$thisNodeNeedlefdaApproval/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedlefdaApproval/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:select1></td></tr></table></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlefdaApproval/@req = 'change' or $thisNodeNeedlefdaApproval/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlefdaApproval/@justification='' and $sugNodefdaApproval != $thisNodefdaApproval, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlefdaApproval/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlefdaApproval/@justification='' and $sugNodefdaApproval != $thisNodefdaApproval, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlefdaApproval/@justification!='' and $sugNodefdaApproval != $thisNodefdaApproval, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlefdaApproval/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlefdaApproval/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/fdaApproval", "", tempRevIndex, "fill", 'org', "", "fdaApproval", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodefdaApproval"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlefdaApproval/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlefdaApproval/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/fdaApproval", "", tempRevIndex, "fill", 'sug', "", "fdaApproval", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodefdaApproval"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodefdaApproval != $thisNodefdaApproval, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlefdaApproval/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlefdaApproval/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlefdaApproval/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlefdaApproval/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlefdaApproval/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlefdaApproval/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlefdaApproval/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlefdaApproval/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodefdaApproval != $orgNodefdaApproval and $thisNodeNeedlefdaApproval/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="dropdownlist"><ix:attr value="if(instance('ins')/fdaApproval ='1' and not(instance('main')/exempt[.='1']), '', 'display:none')" name="style"/><xf:switch><xf:case exf:if="1" id="show-fdaApprovalItem"><td class="component  widenLabel"><exf:variable value="instance('ins')/fdaApprovalItem" name="nsfdaApprovalItem"/><exf:variable value="instance('ins')/fdaApprovalItem" name="nsfdaApprovalItem"/><exf:variable value="instance('ins')/fdaApprovalItem[1]/@revIndex" name="revIndexfdaApprovalItem"/><exf:variable value="(instance('ins')/fdaApprovalItem[@revIndex=$revIndexfdaApprovalItem])" name="thisNodeNeedlefdaApprovalItem"/><exf:variable value="(instance('ins')/fdaApprovalItem)" name="thisNodeNeedleVfdaApprovalItem"/><exf:variable value="concat(if(instance('ins')/fdaApprovalItem[1],  instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[1])]/name, ''),             if(instance('ins')/fdaApprovalItem[2], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[2])]/name), ''),             if(instance('ins')/fdaApprovalItem[3], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[3])]/name), ''),             if(instance('ins')/fdaApprovalItem[4], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[4])]/name), ''),             if(instance('ins')/fdaApprovalItem[5], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[5])]/name), ''),             if(instance('ins')/fdaApprovalItem[6], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[6])]/name), ''),             if(instance('ins')/fdaApprovalItem[7], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[7])]/name), ''),             if(instance('ins')/fdaApprovalItem[8], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[8])]/name), '')             )" name="thisNodefdaApprovalItem"/><exf:variable value="concat(if((instance('ins')/original/fdaApprovalItem)[1],  instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[1])]/name, ''),               if((instance('ins')/original/fdaApprovalItem)[2], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[2])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[3], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[3])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[4], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[4])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[5], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[5])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[6], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[6])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[7], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[7])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[8], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[8])]/name), '')               )" name="orgNodefdaApprovalItem"/><exf:variable value="(instance('ins')/suggestions/fdaApprovalItem)" name="sugNodeSetfdaApprovalItem"/><exf:variable value="concat(if((instance('ins')/suggestions/fdaApprovalItem)[1],  instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[1])]/name, ''),               if((instance('ins')/suggestions/fdaApprovalItem)[2], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[2])]/name), ''),               if((instance('ins')/suggestions/fdaApprovalItem)[3], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[3])]/name), ''),               if((instance('ins')/suggestions/fdaApprovalItem)[4], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[4])]/name), ''),               if((instance('ins')/suggestions/fdaApprovalItem)[5], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[5])]/name), ''),               if((instance('ins')/suggestions/fdaApprovalItem)[6], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[6])]/name), ''),               if((instance('ins')/suggestions/fdaApprovalItem)[7], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[7])]/name), ''),               if((instance('ins')/suggestions/fdaApprovalItem)[8], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/suggestions/fdaApprovalItem)[8])]/name), '')               )" name="sugNodefdaApprovalItem"/><exf:variable value="instance('ins')/previous/review/fdaApprovalItem/@revIndex" name="revIndexOfdaApprovalItem"/><exf:variable value="(instance('ins')/fdaApprovalItem[@revIndex=$revIndexfdaApprovalItem])" name="thisNodeNeedleOldfdaApprovalItem"/><exf:variable value="(instance('ins')/fdaApprovalItem)" name="thisNodeNeedleVOldfdaApprovalItem"/><exf:variable value="concat(if(instance('ins')/fdaApprovalItem[1],  instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[1])]/name, ''),               if(instance('ins')/fdaApprovalItem[2], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[2])]/name), ''),               if(instance('ins')/fdaApprovalItem[3], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[3])]/name), ''),               if(instance('ins')/fdaApprovalItem[4], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[4])]/name), ''),               if(instance('ins')/fdaApprovalItem[5], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[5])]/name), ''),               if(instance('ins')/fdaApprovalItem[6], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[6])]/name), ''),               if(instance('ins')/fdaApprovalItem[7], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[7])]/name), ''),               if(instance('ins')/fdaApprovalItem[8], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=(instance('ins')/fdaApprovalItem[8])]/name), '')               )" name="thisNodeOldfdaApprovalItem"/><exf:variable value="concat(if((instance('ins')/original/fdaApprovalItem)[1],  instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[1])]/name, ''),               if((instance('ins')/original/fdaApprovalItem)[2], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[2])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[3], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[3])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[4], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[4])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[5], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[5])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[6], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[6])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[7], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[7])]/name), ''),               if((instance('ins')/original/fdaApprovalItem)[8], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/original/fdaApprovalItem)[8])]/name), '')               )" name="orgNodeOldfdaApprovalItem"/><exf:variable value="(instance('ins')/suggestions/fdaApprovalItem)" name="sugNodeSetOldfdaApprovalItem"/><exf:variable value="concat(if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[1],  instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[1])]/name, ''),               if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[2], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[2])]/name), ''),               if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[3], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[3])]/name), ''),               if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[4], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[4])]/name), ''),               if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[5], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[5])]/name), ''),               if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[6], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[6])]/name), ''),               if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[7], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[7])]/name), ''),               if((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[8], concat( ' / ', instance('main')/Device|Drug|Biologic[concat(local-name(),position())=((instance('ins')/previous/review/suggestions/fdaApprovalItem[@revIndex=$revIndexOfdaApprovalItem])[8])]/name), '')               )" name="sugNodeOldfdaApprovalItem"/><table class="oneToManyBox multidropdowns"><xf:repeat nodeset="$nsfdaApprovalItem"><tr><td class="label"><xf:output value="if(position() = 1, 'Identify', '')"/></td><td class="value"><xf:select1 style="width:200px;" ref="."><xf:label/><xf:item><xf:label>-Select-</xf:label><xf:value/></xf:item><xf:repeat nodeset="instance('main')/Device|Drug|Biologic"><xf:item><xf:label><xf:output value="name"/></xf:label><xf:value><xf:output value="concat(local-name(),position())"/></xf:value></xf:item></xf:repeat><script ev:event="xforms-value-changed">
                          model.USA.checkMutation("ins", "fdaApprovalItem", "fdaApprovalItem");
                        </script></xf:select1></td><td classs="control"><ix:attr value="if(position() = 1, 'display:none', '')" name="style"/><span class="remove clickable">X
                    <xf:action ev:event="click"><script>
                          var nl = model.selectNodeList(".", contextNode);
                          if (nl.length &gt;= 1){
                            nl[0].parentNode.removeChild(nl[0]);
                            model.USA.checkMutation("ins", "fdaApprovalItem", "fdaApprovalItem");
                            model.USA.rebuildArea('fdaApprovalItem');
                          }
                          </script><script>
                              model.USA.checkMutation("ins", "fdaApprovalItem", "fdaApprovalItem");
                            </script></xf:action></span></td></tr></xf:repeat><tr><td class="label"/><td class="value addline"><span class="clickable"><xf:action ev:event="click"><script>SH.print("adding...");</script><script>
                      
                        var n1 = model.selectNodeList("instance('ins')/fdaApprovalItem[last()]", null)[0];
                        var n2 = n1.cloneNode(true);
                        n1.parentNode.appendChild(n2);
                      
                                            
                      model.rebuild(); model.recalculate(); model.refresh();
                      model.setValue("instance('ins')/fdaApprovalItem[last()]", "");
                                            
                      lead = "instance('ins')/fdaApprovalItem[last()]/@";
                      
                                            
                    model.rebuild(); model.recalculate(); model.refresh();
                    
                      
                        model.USA.refreshArea('fdaApprovalItem');
                        
                    </script></xf:action>
                  Add <img src="../fil/system/resources/ideate/imgs/dialogGraphic.png"/></span></td><td/></tr></table></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlefdaApprovalItem/@req = 'change' or $thisNodeNeedlefdaApprovalItem/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlefdaApprovalItem/@justification='' and $sugNodefdaApprovalItem != $thisNodefdaApprovalItem, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlefdaApprovalItem/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlefdaApprovalItem/@justification='' and $sugNodefdaApprovalItem != $thisNodefdaApprovalItem, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlefdaApprovalItem/@justification!='' and $sugNodefdaApprovalItem != $thisNodefdaApprovalItem, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlefdaApprovalItem/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlefdaApprovalItem/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/fdaApprovalItem", "", tempRevIndex, "swap", 'org', "", "fdaApprovalItem", "true");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodefdaApprovalItem"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlefdaApprovalItem/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlefdaApprovalItem/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/fdaApprovalItem", "", tempRevIndex, "swap", 'sug', "", "fdaApprovalItem", "true");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodefdaApprovalItem"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodefdaApprovalItem != $thisNodefdaApprovalItem, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlefdaApprovalItem/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlefdaApprovalItem/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlefdaApprovalItem/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlefdaApprovalItem/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlefdaApprovalItem/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlefdaApprovalItem/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlefdaApprovalItem/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlefdaApprovalItem/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodefdaApprovalItem != $orgNodefdaApprovalItem and $thisNodeNeedlefdaApprovalItem/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></xf:case><xf:case id="hide-fdaApprovalItem"/></xf:switch></tr><tr class="yesnobuttons"><ix:attr value="if(not(instance('main')/exempt[.='1']), '', 'display:none')" name="style"/><td class="component   widestLabel"><exf:variable value="instance('ins')/additionalRisks/@revIndex" name="revIndexadditionalRisks"/><exf:variable value="(instance('ins')/additionalRisks[@revIndex=$revIndexadditionalRisks])" name="thisNodeNeedleadditionalRisks"/><exf:variable value="instance('ins')/additionalRisks" name="thisNodeVadditionalRisks"/><exf:variable value="if($thisNodeVadditionalRisks='1', 'Yes', if($thisNodeVadditionalRisks='0', 'No', ''))" name="thisNodeadditionalRisks"/><exf:variable value="(instance('ins')/original/additionalRisks[@revIndex=$revIndexadditionalRisks])" name="orgNodeVadditionalRisks"/><exf:variable value="if($orgNodeVadditionalRisks='1', 'Yes', if($orgNodeVadditionalRisks='0', 'No', ''))" name="orgNodeadditionalRisks"/><exf:variable value="(instance('ins')/suggestions/additionalRisks[@revIndex=$revIndexadditionalRisks])" name="sugNodeSetadditionalRisks"/><exf:variable value="(instance('ins')/suggestions/additionalRisks[@revIndex=$revIndexadditionalRisks])" name="sugNodeVadditionalRisks"/><exf:variable value="if($sugNodeVadditionalRisks='1', 'Yes', if($sugNodeVadditionalRisks='0', 'No', ''))" name="sugNodeadditionalRisks"/><exf:variable value="instance('ins')/previous/review/additionalRisks/@revIndex" name="revIndexOadditionalRisks"/><exf:variable value="(instance('ins')/previous/review/additionalRisks[@revIndex=$revIndexOadditionalRisks])" name="thisNodeNeedleOldadditionalRisks"/><exf:variable value="instance('ins')/previous/review/additionalRisks" name="thisNodeVOldadditionalRisks"/><exf:variable value="if($thisNodeVOldadditionalRisks='1', 'Yes', if($thisNodeVOldadditionalRisks='0', 'No', ''))" name="thisNodeOldadditionalRisks"/><exf:variable value="(instance('ins')/previous/review/original/additionalRisks[@revIndex=$revIndexOadditionalRisks])" name="orgNodeVOldadditionalRisks"/><exf:variable value="if($orgNodeVOldadditionalRisks='1', 'Yes', if($orgNodeVOldadditionalRisks='0', 'No', ''))" name="orgNodeOldadditionalRisks"/><exf:variable value="(instance('ins')/previous/review/suggestions/additionalRisks[@revIndex=$revIndexOadditionalRisks])" name="sugNodeSetOldadditionalRisks"/><exf:variable value="(instance('ins')/previous/review/suggestions/additionalRisks[@revIndex=$revIndexOadditionalRisks])" name="sugNodeVOldadditionalRisks"/><exf:variable value="if($sugNodeVOldadditionalRisks='1', 'Yes', if($sugNodeVOldadditionalRisks='0', 'No', ''))" name="sugNodeOldadditionalRisks"/><table class="horizontalSelects"><tr><td class="yesBox"><xf:select1 ref="instance('ins')/additionalRisks" appearance="full" id="additionalRisks"><xf:label>Have any additional risks been identified since the last approval?</xf:label><xf:item><xf:label>Yes</xf:label><xf:value>1</xf:value></xf:item></xf:select1></td><td class="noBox"><xf:select1 ref="instance('ins')/additionalRisks" appearance="full" id="additionalRisks"><xf:label/><xf:item><xf:label>No</xf:label><xf:value>0</xf:value></xf:item><script ev:event="xforms-value-changed">
                model.recalculate();
                model.rebuild();
                model.refresh();
              </script><script ev:event="xforms-value-changed">
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                  SH.print("first...");
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                </script><xf:action exf:if="$thisNodeNeedleadditionalRisks/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedleadditionalRisks/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:select1></td></tr></table></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedleadditionalRisks/@req = 'change' or $thisNodeNeedleadditionalRisks/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedleadditionalRisks/@justification='' and $sugNodeadditionalRisks != $thisNodeadditionalRisks, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedleadditionalRisks/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedleadditionalRisks/@justification='' and $sugNodeadditionalRisks != $thisNodeadditionalRisks, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedleadditionalRisks/@justification!='' and $sugNodeadditionalRisks != $thisNodeadditionalRisks, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedleadditionalRisks/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedleadditionalRisks/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/additionalRisks", "", tempRevIndex, "fill", 'org', "", "additionalRisks", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodeadditionalRisks"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedleadditionalRisks/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedleadditionalRisks/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/additionalRisks", "", tempRevIndex, "fill", 'sug', "", "additionalRisks", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodeadditionalRisks"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodeadditionalRisks != $thisNodeadditionalRisks, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedleadditionalRisks/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedleadditionalRisks/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedleadditionalRisks/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedleadditionalRisks/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedleadditionalRisks/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedleadditionalRisks/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedleadditionalRisks/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedleadditionalRisks/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodeadditionalRisks != $orgNodeadditionalRisks and $thisNodeNeedleadditionalRisks/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="yesnobuttons"><td class="component   widestLabel"><exf:variable value="instance('ins')/publishedLiterature/@revIndex" name="revIndexpublishedLiterature"/><exf:variable value="(instance('ins')/publishedLiterature[@revIndex=$revIndexpublishedLiterature])" name="thisNodeNeedlepublishedLiterature"/><exf:variable value="instance('ins')/publishedLiterature" name="thisNodeVpublishedLiterature"/><exf:variable value="if($thisNodeVpublishedLiterature='1', 'Yes', if($thisNodeVpublishedLiterature='0', 'No', ''))" name="thisNodepublishedLiterature"/><exf:variable value="(instance('ins')/original/publishedLiterature[@revIndex=$revIndexpublishedLiterature])" name="orgNodeVpublishedLiterature"/><exf:variable value="if($orgNodeVpublishedLiterature='1', 'Yes', if($orgNodeVpublishedLiterature='0', 'No', ''))" name="orgNodepublishedLiterature"/><exf:variable value="(instance('ins')/suggestions/publishedLiterature[@revIndex=$revIndexpublishedLiterature])" name="sugNodeSetpublishedLiterature"/><exf:variable value="(instance('ins')/suggestions/publishedLiterature[@revIndex=$revIndexpublishedLiterature])" name="sugNodeVpublishedLiterature"/><exf:variable value="if($sugNodeVpublishedLiterature='1', 'Yes', if($sugNodeVpublishedLiterature='0', 'No', ''))" name="sugNodepublishedLiterature"/><exf:variable value="instance('ins')/previous/review/publishedLiterature/@revIndex" name="revIndexOpublishedLiterature"/><exf:variable value="(instance('ins')/previous/review/publishedLiterature[@revIndex=$revIndexOpublishedLiterature])" name="thisNodeNeedleOldpublishedLiterature"/><exf:variable value="instance('ins')/previous/review/publishedLiterature" name="thisNodeVOldpublishedLiterature"/><exf:variable value="if($thisNodeVOldpublishedLiterature='1', 'Yes', if($thisNodeVOldpublishedLiterature='0', 'No', ''))" name="thisNodeOldpublishedLiterature"/><exf:variable value="(instance('ins')/previous/review/original/publishedLiterature[@revIndex=$revIndexOpublishedLiterature])" name="orgNodeVOldpublishedLiterature"/><exf:variable value="if($orgNodeVOldpublishedLiterature='1', 'Yes', if($orgNodeVOldpublishedLiterature='0', 'No', ''))" name="orgNodeOldpublishedLiterature"/><exf:variable value="(instance('ins')/previous/review/suggestions/publishedLiterature[@revIndex=$revIndexOpublishedLiterature])" name="sugNodeSetOldpublishedLiterature"/><exf:variable value="(instance('ins')/previous/review/suggestions/publishedLiterature[@revIndex=$revIndexOpublishedLiterature])" name="sugNodeVOldpublishedLiterature"/><exf:variable value="if($sugNodeVOldpublishedLiterature='1', 'Yes', if($sugNodeVOldpublishedLiterature='0', 'No', ''))" name="sugNodeOldpublishedLiterature"/><table class="horizontalSelects"><tr><td class="yesBox"><xf:select1 ref="instance('ins')/publishedLiterature" appearance="full" id="publishedLiterature"><xf:label>Have there been any presentations or publications, including abstracts, from this research since the last IRB review?</xf:label><xf:item><xf:label>Yes</xf:label><xf:value>1</xf:value></xf:item></xf:select1></td><td class="noBox"><xf:select1 ref="instance('ins')/publishedLiterature" appearance="full" id="publishedLiterature"><xf:label/><xf:item><xf:label>No</xf:label><xf:value>0</xf:value></xf:item><script ev:event="xforms-value-changed">
                model.recalculate();
                model.rebuild();
                model.refresh();
              </script><script ev:event="xforms-value-changed">
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                  SH.print("first...");
                  model.recalculate();
                  model.rebuild();
                  model.refresh();
                </script><xf:action exf:if="$thisNodeNeedlepublishedLiterature/@changed=''" ev:event="xforms-value-changed"><script>SH.print("evaluating...");</script><xf:setvalue ref="$thisNodeNeedlepublishedLiterature/@changed">-1</xf:setvalue><script>model.USA.addChange();</script></xf:action></xf:select1></td></tr></table></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlepublishedLiterature/@req = 'change' or $thisNodeNeedlepublishedLiterature/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlepublishedLiterature/@justification='' and $sugNodepublishedLiterature != $thisNodepublishedLiterature, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlepublishedLiterature/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlepublishedLiterature/@justification='' and $sugNodepublishedLiterature != $thisNodepublishedLiterature, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlepublishedLiterature/@justification!='' and $sugNodepublishedLiterature != $thisNodepublishedLiterature, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlepublishedLiterature/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlepublishedLiterature/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/publishedLiterature", "", tempRevIndex, "fill", 'org', "", "publishedLiterature", "false");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodepublishedLiterature"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlepublishedLiterature/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlepublishedLiterature/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/publishedLiterature", "", tempRevIndex, "fill", 'sug', "", "publishedLiterature", "false");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodepublishedLiterature"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodepublishedLiterature != $thisNodepublishedLiterature, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlepublishedLiterature/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlepublishedLiterature/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlepublishedLiterature/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlepublishedLiterature/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlepublishedLiterature/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlepublishedLiterature/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlepublishedLiterature/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlepublishedLiterature/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodepublishedLiterature != $orgNodepublishedLiterature and $thisNodeNeedlepublishedLiterature/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></tr><tr class="entryTable"><ix:attr value="if(instance('ins')/publishedLiterature='1', '', 'display:none')" name="style"/><xf:switch><xf:case exf:if="1" id="show-publicationElement"><td class="component  "><exf:variable value="instance('ins')/publicationElement" name="nspublicationElement"/><exf:variable value="instance('ins')/publicationElement[1]/@revIndex" name="revIndexpublicationElement"/><exf:variable value="(instance('ins')/publicationElement[@revIndex=$revIndexpublicationElement])" name="thisNodeNeedlepublicationElement"/><exf:variable value="concat(
          if(instance('ins')/publicationElement[1], concat('(' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/publicationElement)[1]/@type]/@name,' / ',
            instance('ins')/publicationElement[1]/@date,' / ',
            instance('ins')/publicationElement[1]/@title,' / ',
            instance('ins')/publicationElement[1]/document , ')'), ''),
          if(instance('ins')/publicationElement[2], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/publicationElement)[2]/@type]/@name,' / ',
            instance('ins')/publicationElement[2]/@date,' / ',
            instance('ins')/publicationElement[2]/@title,' / ',
            instance('ins')/publicationElement[2]/document , ')'), ''),
          if(instance('ins')/publicationElement[3], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/publicationElement)[3]/@type]/@name,' / ',
            instance('ins')/publicationElement[3]/@date,' / ',
            instance('ins')/publicationElement[3]/@title,' / ',
            instance('ins')/publicationElement[3]/document , ')'), ''),
          if(instance('ins')/publicationElement[4], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/publicationElement)[4]/@type]/@name,' / ',
            instance('ins')/publicationElement[4]/@date,' / ',
            instance('ins')/publicationElement[4]/@title,' / ',
            instance('ins')/publicationElement[4]/document , ')'), ''),
          if(instance('ins')/publicationElement[5], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/publicationElement)[5]/@type]/@name,' / ',
            instance('ins')/publicationElement[5]/@date,' / ',
            instance('ins')/publicationElement[5]/@title,' / ',
            instance('ins')/publicationElement[5]/document , ')'), '')
          )" name="thisNodepublicationElement"/><exf:variable value="concat(
          if(instance('ins')/original/publicationElement[1], concat('(' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/original/publicationElement)[1]/@type]/@name,' / ',
            instance('ins')/original/publicationElement[1]/@date,' / ',
            instance('ins')/original/publicationElement[1]/@title,' / ',
            instance('ins')/original/publicationElement[1]/document , ')'), ''),
          if(instance('ins')/original/publicationElement[2], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/original/publicationElement)[2]/@type]/@name,' / ',
            instance('ins')/original/publicationElement[2]/@date,' / ',
            instance('ins')/original/publicationElement[2]/@title,' / ',
            instance('ins')/original/publicationElement[2]/document , ')'), ''),
          if(instance('ins')/original/publicationElement[3], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/original/publicationElement)[3]/@type]/@name,' / ',
            instance('ins')/original/publicationElement[3]/@date,' / ',
            instance('ins')/original/publicationElement[3]/@title,' / ',
            instance('ins')/original/publicationElement[3]/document , ')'), ''),
          if(instance('ins')/original/publicationElement[4], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/original/publicationElement)[4]/@type]/@name,' / ',
            instance('ins')/original/publicationElement[4]/@date,' / ',
            instance('ins')/original/publicationElement[4]/@title,' / ',
            instance('ins')/original/publicationElement[4]/document , ')'), ''),
          if(instance('ins')/original/publicationElement[5], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/original/publicationElement)[5]/@type]/@name,' / ',
            instance('ins')/original/publicationElement[5]/@date,' / ',
            instance('ins')/original/publicationElement[5]/@title,' / ',
            instance('ins')/original/publicationElement[5]/document , ')'), '')
          )" name="orgNodepublicationElement"/><exf:variable value="(instance('ins')/suggestions/publicationElement[@revIndex=$revIndexpublicationElement])" name="sugNodeSetpublicationElement"/><exf:variable value="concat(
          if(instance('ins')/suggestions/publicationElement[1], concat('(' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/suggestions/publicationElement)[1]/@type]/@name,' / ',
            instance('ins')/suggestions/publicationElement[1]/@date,' / ',
            instance('ins')/suggestions/publicationElement[1]/@title,' / ',
            instance('ins')/suggestions/publicationElement[1]/document , ')'), ''),
          if(instance('ins')/suggestions/publicationElement[2], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/suggestions/publicationElement)[2]/@type]/@name,' / ',
            instance('ins')/suggestions/publicationElement[2]/@date,' / ',
            instance('ins')/suggestions/publicationElement[2]/@title,' / ',
            instance('ins')/suggestions/publicationElement[2]/document , ')'), ''),
          if(instance('ins')/suggestions/publicationElement[3], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/suggestions/publicationElement)[3]/@type]/@name,' / ',
            instance('ins')/suggestions/publicationElement[3]/@date,' / ',
            instance('ins')/suggestions/publicationElement[3]/@title,' / ',
            instance('ins')/suggestions/publicationElement[3]/document , ')'), ''),
          if(instance('ins')/suggestions/publicationElement[4], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/suggestions/publicationElement)[4]/@type]/@name,' / ',
            instance('ins')/suggestions/publicationElement[4]/@date,' / ',
            instance('ins')/suggestions/publicationElement[4]/@title,' / ',
            instance('ins')/suggestions/publicationElement[4]/document , ')'), ''),
          if(instance('ins')/suggestions/publicationElement[5], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/suggestions/publicationElement)[5]/@type]/@name,' / ',
            instance('ins')/suggestions/publicationElement[5]/@date,' / ',
            instance('ins')/suggestions/publicationElement[5]/@title,' / ',
            instance('ins')/suggestions/publicationElement[5]/document , ')'), '')
          )" name="sugNodepublicationElement"/><exf:variable value="instance('ins')/previous/review/publicationElement/@revIndex" name="revIndexOpublicationElement"/><exf:variable value="(instance('ins')/publicationElement[@revIndex=$revIndexpublicationElement])" name="thisNodeNeedleOldpublicationElement"/><exf:variable value="concat(
          if(instance('ins')/previous/review/publicationElement[1], concat('(' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/previous/review/publicationElement)[1]/@type]/@name,' / ',
            instance('ins')/previous/review/publicationElement[1]/@date,' / ',
            instance('ins')/previous/review/publicationElement[1]/@title,' / ',
            instance('ins')/previous/review/publicationElement[1]/document , ')'), ''),
          if(instance('ins')/previous/review/publicationElement[2], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/previous/review/publicationElement)[2]/@type]/@name,' / ',
            instance('ins')/previous/review/publicationElement[2]/@date,' / ',
            instance('ins')/previous/review/publicationElement[2]/@title,' / ',
            instance('ins')/previous/review/publicationElement[2]/document , ')'), '')
          )" name="thisNodeOldpublicationElement"/><exf:variable value="concat(
          if(instance('ins')/previous/review/original/publicationElement[1], concat('(' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/previous/review/original/publicationElement)[1]/@type]/@name,' / ',
            instance('ins')/previous/review/original/publicationElement[1]/@date,' / ',
            instance('ins')/previous/review/original/publicationElement[1]/@title,' / ',
            instance('ins')/previous/review/original/publicationElement[1]/document , ')'), ''),
          if(instance('ins')/previous/review/original/publicationElement[2], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/previous/review/original/publicationElement)[2]/@type]/@name,' / ',
            instance('ins')/previous/review/original/publicationElement[2]/@date,' / ',
            instance('ins')/previous/review/original/publicationElement[2]/@title,' / ',
            instance('ins')/previous/review/original/publicationElement[2]/document , ')'), '')
          )" name="orgNodeOldpublicationElement"/><exf:variable value="concat(
          if(instance('ins')/previous/review/suggestions/publicationElement[1], concat('(' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/previous/review/suggestions/publicationElement)[1]/@type]/@name,' / ',
            instance('ins')/previous/review/suggestions/publicationElement[1]/@date,' / ',
            instance('ins')/previous/review/suggestions/publicationElement[1]/@title,' / ',
            instance('ins')/previous/review/suggestions/publicationElement[1]/document , ')'), ''),
          if(instance('ins')/previous/review/suggestions/publicationElement[2], concat(', (' 
          ,
            (instance('cats')/publicationType/type)[@id=(instance('ins')/previous/review/suggestions/publicationElement)[2]/@type]/@name,' / ',
            instance('ins')/previous/review/suggestions/publicationElement[2]/@date,' / ',
            instance('ins')/previous/review/suggestions/publicationElement[2]/@title,' / ',
            instance('ins')/previous/review/suggestions/publicationElement[2]/document , ')'), '')
          )" name="sugNodeOldpublicationElement"/><h5>Publications</h5><table class="ideatetable entrytable"><ix:attr value="if(count($nspublicationElement) &gt; 0, '', 'display:none')" name="style"/><tr class="top"><th/><th/><th style="text-align:center;">Type</th><th style="text-align:center;">Date</th><th style="text-align:center;">Title</th><th style="text-align:center;">Upload</th></tr><xf:repeat nodeset="$nspublicationElement"><tr><td classs="control"><b style="color:red;cursor:pointer;">X<xf:destroy ev:event="click" ref="."/></b></td><td class="out text small center" style="vertical-align:middle;"><xf:output value="position()"/></td><td class="in dropdown medium left" style="width:70px;vertical-align:middle;"><span><xf:select1 ref="@type"><xf:item><xf:label>-Select-</xf:label><xf:value/></xf:item><xf:repeat nodeset="instance('cats')/publicationType/type"><xf:item><xf:label><xf:output value="@name"/></xf:label><xf:value><xf:output value="@id"/></xf:value></xf:item></xf:repeat><script ev:event="xforms-value-changed">
                              model.USA.checkMutation("main", "publicationElement", "publicationElement");
                            </script></xf:select1></span></td><td class="in manual wide left"><span><print type="date" nodeset="" evaluate="0" condition=""/><table class="date"><tr><td class="dateBox"><div><xf:output value="if(@date != '', concat(substring(@date, 6, 2), '/', substring(@date, 9, 2), '/', substring(@date, 1, 4)), '-')"/></div></td><td class="dateCtrl"><xf:input ref="@date"/></td></tr></table><span style="display:none"><xf:input ref="@date"><script ev:event="xforms-value-changed">
                            model.USA.checkMutation("main", "publicationElement", "publicationElement");
                          </script></xf:input></span></span></td><td class="in manual wide left"><span><xf:textarea style="width:200px; height:3em;margin-top:0px;" ref="@title">
            </xf:textarea><span style="display:none"><xf:input ref="@title"><script ev:event="xforms-value-changed">
                            model.USA.checkMutation("main", "publicationElement", "publicationElement");
                          </script></xf:input></span></span></td><td class="in manual wide left"><span><print type="document" nodeset="" evaluate="0" condition="" label="Upload"/><table class="oneToManyBox" style="width:150px;">
                <tr>
                    <td class="">
                        <span>
                            <ix:attr value="if(document != '', '', 'display:none')" name="style"/>
                            <a target="_blank_">
                                <ix:attr value="document/@uri" name="href"/>
                                <xf:output class="" value="document"/>
                            </a>
                        </span>
                        <span class="clickable"><ix:attr value="if(document != '', 'display:none', 'cusor:pointer;color:blue')" name="style"/><script ev:event="click">
                                // added manually here:///////////////////////
                                model.Frm.DOC_NEW_STATUS = "New";            /////////
                                model.Frm.DOC_NEW_DECISION = "Pending";      /////////
                                model.Frm.DOC_REFRESHSECTION= "publicationElement";
                                //////////////////////////////////////////////////////
                                model.Frm.docUpload.manualLabel = "Related Publication";
                                
                                po = model.getValue("@title", contextNode);
                                if(po==""){
                                alert("You need to provide a title before uploading the associated document.");
                                return;
                                }
                                //model.Frm..docUpload.dSkip = true;
                                model.Frm.configureDocUpload("replaceValue",
                                "instance('ins')/publicationElement[@title='" + po + "']/document", "", "",
                                event.uiEvent.clientX, event.uiEvent.clientY, '', '');
                                model.Frm.executeDocUpload(); </script> Attach <!--<img
                                    src="../fil/system/resources/ideate/imgs/dialogGraphic.png"
                                />--></span>
                    </td>
                    <td classs="control">
                        <span class="remove clickable">X <ix:attr value="if(document != '', '', 'display:none')" name="style"/><xf:action ev:event="click" ref=".">
                                <xf:setvalue ref="document"/>
                                <xf:setvalue ref="document/@uri"/>
                            </xf:action></span>
                    </td>
                </tr>
            </table><span style="display:none"><xf:input ref="document"><script ev:event="xforms-value-changed">
                            model.USA.checkMutation("main", "publicationElement", "publicationElement");
                          </script></xf:input></span></span></td></tr></xf:repeat></table><br/><table class="addButtons"><tr><td><xf:trigger class="" style=""><xf:label style="">Add</xf:label><xf:action ev:event="DOMActivate"><script>
              params={revIndex:""};
              
              
                  var ndID = model.getValue("instance('ins')/*[last()]/@revIndex", null) * 1;
                  params.revIndex = ndID + 1;
                  
              
              var xmlDoc = model.Frm.processDoc("", "/applications/IRB/js/addPublicationElement", params, "script", "xml");
              var n = model.selectNodeList("instance('ins')", null);
              n[0].appendChild(xmlDoc.documentElement);
              model.refresh();
              model.rebuild();
              model.recalculate();
              model.activateCase("hide-publicationElement");
              model.activateCase("show-publicationElement");   
              </script></xf:action></xf:trigger></td></tr></table></td><td class="options"/><td class="errors custError"><div><ix:attr value="if($thisNodeNeedlepublicationElement/@req = 'change' or $thisNodeNeedlepublicationElement/@req = 'changeSug', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlepublicationElement/@justification='' and $sugNodepublicationElement != $thisNodepublicationElement, 'color:red', 'color:green')" name="style"/>
                Change <xf:output value="if($thisNodeNeedlepublicationElement/@req = 'change', 'Required', 'Suggested')"/><xf:output value="if($thisNodeNeedlepublicationElement/@justification='' and $sugNodepublicationElement != $thisNodepublicationElement, ' (Ignored - Please Justify)', '')"/><xf:output value="if($thisNodeNeedlepublicationElement/@justification!='' and $sugNodepublicationElement != $thisNodepublicationElement, ' (Ignored/Justified)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlepublicationElement/@comment"/></span></p><hr/><i style="font-size:7pt;color:black;">Select value to use:</i><br/><br/><table style="background-color:white;"><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:red;cursor:pointer">Prior Value</u><xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlepublicationElement/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/publicationElement", "", tempRevIndex, "swap", 'org', "", "publicationElement", "true");
                          </script></xf:action></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$orgNodepublicationElement"/></span><br/></td></tr><tr><td style="background-color:white;vertical-align:top;"><b><u style="color:green;cursor:pointer"><xf:output value="if($thisNodeNeedlepublicationElement/@req = 'change', 'Required', 'Suggested')"/> Revision
                        <xf:action ev:event="click"><xf:setvalue value="$thisNodeNeedlepublicationElement/@revIndex" ref="instance('form')/tempRevIndex"/><script>
                            tempRevIndex = model.getValue("instance('form')/tempRevIndex");
                            model.USA.writeOverTagExplicit("instance('ins')/publicationElement", "", tempRevIndex, "swap", 'sug', "", "publicationElement", "true");
                          </script></xf:action></u></b></td><td style="background-color:white;vertical-align:top;color:black"><span><xf:output value="$sugNodepublicationElement"/></span><br/></td></tr></table><span><ix:attr value="if($sugNodepublicationElement != $thisNodepublicationElement, '', 'display:none')" name="style"/><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlepublicationElement/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                   // model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></span></div></span></div><div><ix:attr value="if($thisNodeNeedlepublicationElement/@req = 'comment', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u><ix:attr value="if($thisNodeNeedlepublicationElement/@justification='', 'color:red', 'color:green')" name="style"/>Justification <xf:output value="if($thisNodeNeedlepublicationElement/@justification='', '(Required)', '')"/></u><div style="width:300px;"><p><h5>Requirement:</h5><span style="color:black"><xf:output value="$thisNodeNeedlepublicationElement/@comment"/></span></p><hr/><br/><i style="font-size:7pt;color:black;">Justification:</i><span style="color:black"><xf:textarea ref="$thisNodeNeedlepublicationElement/@justification" style="width:260px;height:100px;"><script ev:event="xforms-value-changed">
                    //model.rebuild();
                    //model.refresh();
                    //model.recalculate();
                  </script></xf:textarea></span></div></span></div><div><ix:attr value="if($thisNodeNeedlepublicationElement/@req = 'commentOnly', '', 'display:none')" name="style"/><span class="dialogOverInteractive"><u style="color:blue">Comment</u><div style="width:300px;"><p><h5>Comment:</h5><span style="color:black"><xf:output value="$thisNodeNeedlepublicationElement/@comment"/></span></p></div></span></div><div><ix:attr value="if($thisNodepublicationElement != $orgNodepublicationElement and $thisNodeNeedlepublicationElement/@req = '', 'color:red', 'display:none')" name="style"/>Using New Value</div></td></xf:case><xf:case id="hide-publicationElement"/></xf:switch></tr></table></div></div><div class="bottomNav"><table><tr><td class="back"><div class="nav" style="float:right"><script ev:event="click">
                    model.Frm.navigateTo("previousTab");
                  </script><div style="float:left" class="command">previous</div><img style="float:right" src="../fil/system/resources/ideate/imgs/left.png"/></div></td><td class="next"><div class="nav" style="float:left"><script ev:event="click">
                    model.Frm.navigateTo("nextTab");
                  </script><img style="float:left" src="../fil/system/resources/ideate/imgs/right.png"/><div style="float:right" class="command">next</div></div></td></tr></table><div style="text-align:center; font-size:10px;margin-top:30px;">© Consilience International LLC, 2010</div></div></form>