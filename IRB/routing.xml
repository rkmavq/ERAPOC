<?xml version="1.0" encoding="UTF-8"?>
<routing>
    <statusTypes>
        <!--<type id="ACT" name="Legacy Active"/>-->
        <type id="active" name="Active"/>
        <type id="expired" name="Expired"/>
        <type id="suspended" name="Suspended"/>
        <type id="terminated" name="Terminated"/>
        <type id="rejected" name="Rejected"/>
        <type id="withdrawn" name="Withdrawn"/>
        <type id="closed" name="Completed"/>
        <type id="notHuman" name="Not Human Subjects"/>
        <type id="notRsrch" name="Not Research"/>
    </statusTypes>
    
    
    <!-- Case Initialization -->
    <start stage="application" status="inDev" message="New IRB Protocol Created"/>
    <startScreen stage="application" status="inDev" message="New One Time Emergency Use Created"/>
    
    <action name="Case Update" id="changeProtocolStatus" dialog="changeProtocolStatus" launcherRole="admin"></action>
    
    <!-- Administrative Amendments START -->
    <!--VV 03/25/2019. The uri for Administrative Amendment used to be IRB_v01r00b00_AMDcreateNewAdmin, but there is no reason for it. 
    AMDcreateNew cane be re-used with a different tabset container xfrm, a different tabset file, and a different path to approval than a regular amendment-->
    <fragment id="amendmentAdmin" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        op="amendmentOp"
        linkedWhen="active"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <!-- Allowing the creation of admin amendment when inDev -->
    <fragment id="amendmentAdmin_inDev" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        
        op="amendmentOp"
        linkedWhen="inDev"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <fragment id="amendmentAdmin__closed" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        
        op="amendmentOp"
        linkedWhen="closed"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <fragment id="amendmentAdmin__TERM" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        
        op="amendmentOp"
        linkedWhen="terminated"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <fragment id="amendmentAdmin__exp" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        
        op="amendmentOp"
        linkedWhen="expired"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <fragment id="amendmentAdmin__susp" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        
        op="amendmentOp"
        linkedWhen="suspended"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <fragment id="amendmentAdmin__revntreq" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        
        op="amendmentOp"
        linkedWhen="revntreq"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <fragment id="amendmentAdmin_withdrawn" type="linkedOp" title="Create Administrative Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentAdminTabs.xml"  tabsetContainer="amendmentAdminTabs.xfrm"
        
        op="amendmentOp"
        linkedWhen="withdrawn"
        launchLabel="Administrative Amendment"
        launchMessage="Are you sure you want to make an Administrative change to the protocol?"
        
        linkedOpHandler="amendmentCreateAdminDataSrc.js"
        linkedOpStatus="inDev" 
        createVersion="1" 
        launcherRole="reviewer" continuationRole="reviewer"
        instruction=""
        description="Create Administrative Amendment" 
        descriptionLast="" descriptionNext="Administrative Amendment">
        
        <route type="static" fragment="amd_ADMINdetermineProtocol"/>
    </fragment>
    <fragment id="amd_ADMINdetermineProtocol" type="end" title="Render Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" instruction="" descriptionLast="Administrative Update Complete"
        descriptionNext="Administrative Update Complete" linkedOpHandler="amendment_calculateDecisionByAdmin.js" op="amendmentOp"> </fragment>
    
    <!-- Administrative Amendments END -->
    <!-- Initial Submission - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->    
    
    <!-- Basic IRB Creation Cycle (Straight Line) -->
    <fragment id="createNew" type="create" title="Create IRB Protocol" 
        uri="IRB_v01r00b00_createNew"  tabset="createTabs.xml"  tabsetContainer="createTabs.xfrm"
        
        launcherRole="Admin" instruction="" description="">
                
        <route type="choice" fragment="sendToIntake"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId;"/>
        
        <!--<route type="choice" fragment="sendToDeptRev"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId;" action="Assigned Department Head"/>-->
        <route type="choice" fragment="authorize"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') != Host.getCurrentUser().userId;"/>
    </fragment>


    <fragment id="createNewNoSplash" type="create" title="Create IRB Protocol" 
        uri="IRB_v01r00b00_createNewNoSplash"  tabset="createTabs.xml"  tabsetContainer="createTabs.xfrm"
        
        launcherRole="Admin" instruction="" description="">
        
        <route type="choice" fragment="sendToIntake"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId;"/>
        
        <!--<route type="choice" fragment="sendToDeptRev"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId;" action="Assigned Department Head"/>-->
        <route type="choice" fragment="authorize"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') != Host.getCurrentUser().userId;"/>
    </fragment>

    <!-- PI Authorization for Proxy -->
    <fragment id="authorize" type="continuation" title="Submit IRB Protocol"
        uri="IRB_v01r00b00_submit"  tabset="createTabs.xml"  tabsetContainer="createTabs.xfrm" launcherRole="admin" continuationRole="pi"
        continuationUserType="pi" continuationUser="dynamic" instruction="Authorize the IRB Protocol"
        descriptionLast="IRB Protocol Development Completed by Proxy"
        descriptionNext="IRB Protocol Pushed to PI for submission">
        
        <!--<route type="choice" fragment="sendToDeptRev"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId &amp;&amp; data.getValue('path') == 'authorized'" action="Assigned Department Head"/>-->
        
        <route type="choice" fragment="sendToIntake"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId &amp;&amp; data.getValue('path') == 'authorized'"/>
        
        <route type="choice" fragment="reject"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId &amp;&amp; data.getValue('path') != 'authorized'"/>
        
        <route type="choice" fragment="authorize"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') != Host.getCurrentUser().userId;"/>
    <route type="choice" fragment="authorize"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid')  == Host.getCurrentUser().userId &amp;&amp; data.getValue('path') == 'PIreassigning'"/>
    </fragment>

    <fragment id="reject" type="end" title="IRB Protocol Rejected" instruction=""
        descriptionLast="PI decided not to submit"
        descriptionNext="PI decided not to submit"
        newStatus="withdrawn" linkedOpHandler="withdraw.js">
    </fragment>

    <!-- First Review -->
    <fragment id="sendToDeptRev" type="continuationReview" title="Review IRB Protocol"
        uri="IRB_v01r00b00_deptHeadReview" tabset="deptHeadReviewSet.xml" tabsetContainer="deptHeadReviewTabs.xfrm" 
        
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDeptReviewer.js"
        
        instruction=""
        descriptionLast="IRB Protocol Completed"
        descriptionNext="Protocol Sent for Division Review"
        newStatus="deptReview">
        
        <route type="choice" fragment="sendToIntake" 
                condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="revise" 
            condition="data.getValue('passFail') == '0';" action="Returned to PI"/>
        <route type="choice" fragment="reviseFast" 
            condition="data.getValue('passFail') == '-1';" action="Returned to PI"/>
    </fragment>

    <!-- First Review (Requires Revision) -->
    <fragment id="revise" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_revise"  tabset="reviseSet.xml"  tabsetContainer="reviseTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Division Revisions Required"
        newStatus="revisions">
        
        <route type="static" fragment="sendToRevRev" action="Assigned Department Head"/>
    </fragment>
    
    <!-- First Review (Requires Revisions, then go straight to intake) -->
    <fragment id="reviseFast" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_revise"  tabset="reviseSet.xml"  tabsetContainer="reviseTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Department Revisions Required"
        newStatus="revisions">
        
        <route type="static" fragment="sendToIntake"/>
    </fragment>

    <!-- First Review (Review Revisions, Suggest Further Changes or Accept) -->
    <fragment id="sendToRevRev" type="continuation" title="Review IRB Protocol Revisions"
        uri="IRB_v01r00b00_ReviewReview"  tabset="reviewReviewSet.xml"  tabsetContainer="reviewTabs.xfrm" 
        
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDeptReviewer.js"
        
        instruction=""
        descriptionLast="IRB Protocol Revisions Complete"
        descriptionNext="IRB Protocol Revisions being Reviewed" newStatus="deptReview">

        <route type="choice" fragment="sendToIntake" 
            condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="revise" 
            condition="data.getValue('passFail') == '0';" action="Returned to PI"/>
        <route type="choice" fragment="reviseFast" 
            condition="data.getValue('passFail') == '-1';" action="Returned to PI"/>
    </fragment>


<!-- MSSM addition for divisions in medicine -->    
    <!--<fragment id="sendToMed" type="continuationReview" title="Review IRB Protocol (Medicine)"
        uri="IRB_v01r00b00_divReview" tabset="reviewSet.xml" tabsetContainer="reviewTabs.xfrm" 
        
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDivReviewer.js"
        
        instruction=""
        descriptionLast="IRB Protocol Reviewed/Approved by Division"
        descriptionNext="Protocol Sent for Departmental Review"
        newStatus="deptReview">
        
        <route type="choice" fragment="sendToIntake" 
            condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="reviseMed" 
            condition="data.getValue('passFail') == '0';"/>
        <route type="choice" fragment="reviseFastMed" 
            condition="data.getValue('passFail') == '-1';"/>
    </fragment>
    
    <!-\- First Review (Requires Revision) -\->
    <fragment id="reviseMed" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_revise"  tabset="reviseSet.xml"  tabsetContainer="reviseTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Departmental Revisions Required"
        newStatus="revisions">
        
        <route type="static" fragment="sendToRevRevMed"/>
    </fragment>
    
    <!-\- First Review (Requires Revisions, then go straight to intake) -\->
    <fragment id="reviseFastMed" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_revise"  tabset="reviseSet.xml"  tabsetContainer="reviseTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Departmental Revisions Required"
        newStatus="revisions">
        
        <route type="static" fragment="sendToIntake"/>
    </fragment>
    
    <!-\- First Review (Review Revisions, Suggest Further Changes or Accept) -\->
    <fragment id="sendToRevRevMed" type="continuation" title="Review IRB Protocol Revisions"
        uri="IRB_v01r00b00_ReviewReviewMed"  tabset="reviewReviewSet.xml"  tabsetContainer="reviewTabs.xfrm" 
        
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDivReviewer.js"
        
        instruction=""
        descriptionLast="IRB Protocol Revisions Complete"
        descriptionNext="IRB Protocol Revisions being Reviewed" newStatus="deptReview">
        
        <route type="choice" fragment="sendToIntake"
            condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="reviseMed" 
            condition="data.getValue('passFail') == '0';"/>
        <route type="choice" fragment="reviseFastMed" 
            condition="data.getValue('passFail') == '-1';"/>
    </fragment>-->    
    <!-- End MSSM additions -->
    
    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="sendToIntake" type="continuation" title="Assign IRB Protocol to an Analyst"
        uri="IRB_v01r00b00_intakeReview"  tabset="intakeSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        updateReceiptDate="1"
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        instruction=""
        descriptionLast="IRB Protocol Sent to Intake"
        descriptionNext="IRB Protocol Being Processed"
        passToIntake="1"
        createVersion="1"
        newStatus="intakeReview">
                
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice" fragment="reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    <fragment id="sendToIntakeMicro" type="continuation" title="Assign IRB Protocol to an Analyst"
        uri="IRB_v01r00b00_intakeReview"  tabset="intakeSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="IRB Protocol Sent to Intake"
        descriptionNext="IRB Protocol Being Processed"        
        passToMicroIntake="1"        
        newStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice" fragment="reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoordMicro"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="sendToIntakeReturned" type="continuation" title="Assign IRB Protocol to an Analyst"
        uri="IRB_v01r00b00_intakeReview"  tabset="intakeSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"        
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="IRB Protocol Sent to Intake"
        descriptionNext="IRB Protocol Being Processed"
        
        passToIntake="1"
        
        newStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice" fragment="reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    <!-- changed this from IRB_v01r00b00_reviseAdmin to IRB_v01r00b00_reviseAdminRS; tabcontainer from reviseAdminTabs to reviseTabsRS tabset from reviseSet to RSSet
        uri="IRB_v01r00b00_reviseAdminRS"  tabset="reviseSet.xml"  tabsetContainer="reviseAdminTabs.xfrm"-->
    <fragment id="reviseIntake" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_reviseAdminRS"  tabset="RSSet.xml"  tabsetContainer="reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Intake Revisions Required"
        returned="1"
        newStatus="revisions">
        
        <instructions>The Initial Application submission has been returned for revisions by intake, please resubmit.</instructions>
        
        <route type="static" fragment="returnToIntake"/>
    </fragment>
     <!-- JF:  2/17/17 RITDEV-79 Allow Intake role to use Return to PI action (changed returnBackRs to 0) -->
     <!-- AB:  7/10/17 RITDEV-751 Made Return to PI from intake work  
     -->
    <fragment id="returnToIntake" type="continuation" title="Review changes and Assign IRB Protocol to an Analyst"
        uri="IRB_v01r00b00_intakeReview"  tabset="intakeSetREVRS.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="IRB Protocol Returned to Intake"
        descriptionNext="IRB Protocol Being Processed"
        
        assignmentHandler="assignIntake.js"        
        returnedBack="1"
        passToIntake="1"
        newStatus="intakeReview"
     	returnedBackRS="0">
                
        <instructions>Review changes and Assign IRB Protocol to an Analyst</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice" fragment="reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    
    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="sendToCoord" type="continuation" title="Review IRB  Protocol Submission"
        uri="IRB_v01r00b00_coordReview"  tabset="coordSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="IRB Protocol Sent to Coordinator"
        descriptionNext="IRB Protocol Being Processed"
        
        passToCoord="1"        
        newStatus="adminReview">
        
        <instructions>Review IRB  Protocol Submission.</instructions>
        <!--<route type="choice" fragment="sendToIntakeMicro"
            condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>-->
        
        <route type="choice" fragment="reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice" fragment="sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <fragment id="sendToCoordMicro" type="continuation" title="Review IRB  Protocol Submission"
        uri="IRB_v01r00b00_coordReview"  tabset="coordSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        instruction=""
        descriptionLast="IRB Protocol Sent to Coordinator"
        descriptionNext="IRB Protocol Being Processed"
        
        passToMicroCoord="1"
        microOnly="1"
        newStatus="adminReview">
        
        <instructions>Review IRB  Protocol Submission.</instructions>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <!-- Micro mods required determination process fragment ends with the build of Micro RS -->
    <fragment id="determineProtocolMicro" type="end" title="Render Micro Office Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" instruction="" descriptionLast="Review determination set by Micro office"
        descriptionNext="IRB Protocol Awaiting IRB Response Submission Review" linkedOpHandler="calculateDecisionMicro.js" 
        newStatus="adminReview"> 
    </fragment>
    <fragment id="sendToBoardMicro" type="end" title="Decide on IRB Protocol"
        uri="IRB_v01r00b00_boardReview"  tabset="boardSet.xml"  tabsetContainer="boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" instruction=""
        descriptionLast="IRB Protocol Sent to Board Meeting"
        descriptionNext="IRB Protocol Awaiting Review by Board"
        newStatus="boardReview">
    </fragment><!--  linkedOpHandler="sendToBoardMicro.js" -->
    
    <fragment id="reviseCoord" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_reviseAdminRS"  tabset="RSSet.xml"  tabsetContainer="reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned="1"
        newStatus="revisions"
        passToCoord=""
        >
        
        <instructions>The Initial Application submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static" fragment="returnToCoordReview"/>
    </fragment>
    
    <fragment id="returnToCoordReview" type="continuation" title="Review IRB  Protocol Submission"
        uri="IRB_v01r00b00_coordReview"  tabset="coordSetREVRS.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="IRB Protocol Returned to Coordinator"
        descriptionNext="IRB Protocol Being Processed"
        returnedBack="1"
        newStatus="adminReview"
        returnedBackRS="1"        
        passToCoord="1"
        >
        
        <instructions>Review changes the IRB  Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        <route type="choice" fragment="sendToIntakeMicro"
            condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>        
        
        <route type="choice" fragment="reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice" fragment="sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <!--<route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>-->
    </fragment>
    

    <fragment id="returnToCoord" type="continuation" title="Review IRB  Protocol Submission"
        uri="IRB_v01r00b00_coordReview"  tabset="coordSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="IRB Protocol Returned to Coordinator"
        descriptionNext="IRB Protocol Being Processed"
        returned="1"
        passToCoord="1"
        newStatus="adminReview"
        returnedBack ="1"
        returnedBackRS=""
        >
                
        <instructions>Review IRB  Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice" fragment="reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice" fragment="sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
   
    <fragment id="respondToRSCoord" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_reviseAdminRS"  tabset="RSSet.xml"  tabsetContainer="reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned=""
        newStatus="revisions"
        passToCoord=""
        >
        
        <instructions>The Initial Application submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static" fragment="returnToCoordReview"/>
    </fragment>
    
    <fragment id="reviewRSCoord" type="continuation" title="Review IRB Protocol Revisions"
        uri="IRB_v01r00b00_coordReview"  tabset="coordSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm" launcherRole="admin" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="IRB Protocol Revisions Complete"
        descriptionNext="IRB Protocol Revisions being Reviewed" newStatus="adminReview"
        
        passToCoord="1"
        returnedBackRS="1"
        >
        
        <instructions>Review the modifications (response submission) the IRB Protocol Submission.</instructions>
        
        <route type="choice" fragment="reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice" fragment="sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
  
    <fragment id="sendToDirector" type="continuation" title="Please Handle the IRB Protocol Submission"
        uri="IRB_v01r00b00_directorReview"  tabset="directorSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="IRB Protocol Escalated to Director"
        descriptionNext="IRB Protocol Being Processed"
        
        passToDirector="1"        
        newStatus="directorReview">
        
        
        <instructions>The Initial Application submission has been escalated by the previous administrator, please review.</instructions>
        
        <route type="choice" fragment="reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice" fragment="returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSDirector"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="reviseDirector" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_reviseAdminRS"  tabset="RSSet.xml"  tabsetContainer="reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        newStatus="revisions"
        passToDirector="1">
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static" fragment="returnToDirector"/>
    </fragment>

    <fragment id="returnToDirector" type="continuation" title="Please Handle the IRB Protocol Submission"
        uri="IRB_v01r00b00_directorReview"  tabset="directorSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="IRB Protocol Returned to Director"
        descriptionNext="IRB Protocol Being Processed"
        returnedBack="1"
        newStatus="directorReview"
        returnedBackRS="1"
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice" fragment="reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice" fragment="returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSDirector"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    <fragment id="sendToDirectorFromIntake" type="continuation" title="Please Handle the IRB Protocol Submission"
        uri="IRB_v01r00b00_directorReview"  tabset="directorSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="IRB Protocol Escalated to Director"
        descriptionNext="IRB Protocol Being Processed"
        
        passToDirector="1"
        newStatus="directorReview">
        
        <instructions>The Initial Application submission has been escalated by intake, please review.</instructions>
        
        <route type="choice" fragment="reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="sendToIntakeReturned"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSDirector"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice" fragment="sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>

    </fragment>
    
    <fragment id="reviseDirectorFromIntake" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_reviseAdmin"  tabset="reviseSet.xml"  tabsetContainer="reviseAdminTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="IRB Protocol Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        newStatus="revisions"
        passToDirector="1"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static" fragment="returnToDirectorFromIntake"/>
    </fragment>
    
    <fragment id="returnToDirectorFromIntake" type="continuation" title="Please Handle the IRB Protocol Submission"
        uri="IRB_v01r00b00_directorReview"  tabset="directorSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="IRB Protocol Returned to Director"
        descriptionNext="IRB Protocol Being Processed"
        returnedBack="1"
        newStatus="directorReview"
        returnedBackRS="1"
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice" fragment="reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="sendToIntakeReturned"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSDirector"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice" fragment="sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>
    </fragment>
    
    <fragment id="respondToRSDirector" type="continuation" title="Modifications Required for IRB Protocol" uri="IRB_v01r00b00_reviseRSAdmin"  tabset="piRS.xml"  tabsetContainer="reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" continuationUserType="owner"
        continuationUser="" instruction="" descriptionLast="IRB Protocol Response Submission Sent to PI"
        descriptionNext="Modifications Required" newStatus="revisions"
        passToDirector="1"
        >
        <!-- Might change the status to "In Revision" or something like that -->
        
        <instructions>Please revise the Initial Application per the required modifications.</instructions>
        
        <route type="static" fragment="reviewRSDirector"/>
    </fragment>
    
    <fragment id="reviewRSDirector" type="continuation" title="Review IRB Protocol Revisions"
        uri="IRB_v01r00b00_directorReview"  tabset="directorSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm" launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="IRB Protocol Revisions Complete"
        descriptionNext="IRB Protocol Revisions being Reviewed" newStatus="directorReview"
        
        returnedBack ="1"
        returnedBackRS="1"
        passToDirector="1"
        >
        
        <instructions>Review the modifications (response submission) the IRB Protocol Submission.</instructions>
       
       
    </fragment>

        <!-- Central Review / Intake - Assigns Next Steps, including Reassignment (to a different Coordinator) -->
    <!--<fragment id="sendToCentralAdmin" type="continuation" title="Process IRB Protocol Submission"
        uri="IRB_v01r00b00_centralReview"  tabset="adminSet.xml"  tabsetContainer="adminTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignCentralAdmin.js"
        
        instruction=""
        descriptionLast="IRB Protocol Sent to Central Admin"
        descriptionNext="IRB Protocol Being Processed"
        
        passToIntake="1">

        <route type="choice" fragment="ReassignCentralAdmin"
            condition="data.getValue('newCoor') == '1'"/>

        <!-\- You could expand this - use the decision to create different end points if you want, i do one below here to handle the need for a RS -\->
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor') != '1'"/>

        <route type="choice" fragment="respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor') != '1'"/>

<!-\-        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor') != '1'"/>-\->
    </fragment>-->

    <!-- Central Review / Intake (when reassigned) - Assigns Next Steps, including Reassignment (to a different Coordinator) -->
    <!--<fragment id="ReassignCentralAdmin" type="continuation" title="Process IRB Protocol Submission"
        uri="IRB_v01r00b00_centralReview"  tabset="adminSet.xml"  tabsetContainer="adminTabs.xfrm" 
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="IRB Protocol Reassigned to Different Admin"
        descriptionNext="IRB Protocol Being Processed">

        <route type="choice" fragment="ReassignCentralAdmin"
            condition="data.getValue('newCoor') == '1'"/>
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor') != '1'"/>
        <route type="choice" fragment="respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor') != '1'"/>
        <!-\-<route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor') != '1'"/>-\->
    </fragment>
-->
    <!--<fragment id="respondToRS" type="continuation" title="Modifications Required for IRB Protocol" uri="IRB_v01r00b00_reviseRS"  tabset="piRS.xml"  tabsetContainer="reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" continuationUserType="owner"
        continuationUser="" instruction="" descriptionLast="IRB Protocol Response Submission Sent to PI"
        descriptionNext="Modifications Required">
        <!-\- Might change the status to "In Revision" or something like that -\->
        <route type="static" fragment="reviewRS"/>
    </fragment>-->
    
    <!--<fragment id="reviewRS" type="continuation" title="Review IRB Protocol Revisions"
        uri="IRB_v01r00b00_ReviewRS"  tabset="returnedRS.xml"  tabsetContainer="reviewTabsRS.xfrm" launcherRole="admin" continuationRole="reviewer"
        continuationUserType="namedRole" continuationUser="centralAdmin" instruction=""
        descriptionLast="IRB Protocol Revisions Complete"
        descriptionNext="IRB Protocol Revisions being Reviewed" newStatus="deptReview">
                
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'"/>
        
        <route type="choice" fragment="respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/>
        
        <!-\-<route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0'"/>-\->
        
        <!-\- Still need this sendback segment -\->
        <!-\- Probably include a different sendback segment just with different language here (so the lifecycle history reads better), but send back to the same fragment -\->
        <route type="choice" fragment="respondToRS" condition="data.getValue('passFail') == '0';"/>
    </fragment>-->
        
    <fragment id="determineProtocol" type="end" title="Render Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" instruction="" descriptionLast="IRB Protocol Reviewed"
        descriptionNext="IRB Protocol Reviewed" linkedOpHandler="calculateDecision.js"> </fragment>

    
    <fragment id="sendToBoard" type="end" title="Decide on IRB Protocol"
        uri="IRB_v01r00b00_boardReview"  tabset="boardSet.xml"  tabsetContainer="boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" instruction=""
        descriptionLast="IRB Protocol Sent to Board Meeting"
        descriptionNext="IRB Protocol Awaiting Review by Board" linkedOpHandler="sendToBoard.js"
        newStatus="boardReview">
    </fragment>

    <!-- THIS ONE IS CALLED FROM THE BOARD - IT MAKE THE CENTRAL ADMIN PROCESS ANY BOARD DECISION -->
    <!--<fragment id="returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_centralReturn" launcherRole="board" continuationRole="reviewer"
        continuationUserType="coor" instruction="" descriptionLast="Board Review Complete"
        descriptionNext="Results Being Processed">
        
        <route type="choice" fragment="respondToRS"
            condition="(data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/> <!-\- This one sends out the Reponse submision as in the central review if there is no board meeting -\->
        <route type="choice" fragment="establishProtocol" condition="data.getValue('decision') != 'mod'"/><!-\- Should replace tihs establish with one of your other steps -\->  
    </fragment>-->

<!-- Replacement -->
    <fragment id="returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_coordReview"  tabset="coordSet.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="SENDER"
        
        instruction=""
        descriptionLast="Board Review Complete"
        descriptionNext="Results Being Processed"
        returned="1"
        passToCoord="1"
        returnedBack ="1"
        returnedBackRS=""
        >
        
        <instructions>Review Board Decisions IRB Protocol Submission.</instructions>        
        
        <route type="choice" fragment="sendToCoordMicro"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice" fragment="sendToDirectorMicro"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>



   <!-- <fragment id="establishProtocol" type="end" title="Activate" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        instruction="" descriptionLast="IRB Protocol Created" descriptionNext="IRB Protocol Created"
        newStage="protocol" newStatus="active" linkedOpHandler="establish.js"> </fragment>

    <fragment id="leaveProtocol" type="end" title="Deferred" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        instruction="" descriptionLast="IRB Protocol Deferred"
        descriptionNext="IRB Protocol Waiting for Next Board Meeting" newStatus="deferred"
        linkedOpHandler="defer.js"> </fragment>

    <fragment id="rejectProtocol" type="end" title="Declined" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        instruction="" descriptionLast="IRB Protocol Declined"
        descriptionNext="IRB Protocol Not Established" newStatus="rejected"
        linkedOpHandler="decline.js"> </fragment>-->


    <!-- External Review Step - Standalone Adhoc Fragment(s) -->
    <fragment id="externalRev" type="linkedOpRev" title="Review IRB Protocol"
        uri="IRB_v01r00b00_deptReview" tabset="reviewSet.xml" tabsetContainer="reviewTabs.xfrm"
        launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="special" continuationUser="centralAdmin"
        
        instruction=""
        descriptionLast=""
        descriptionNext="IRB Protocol Sent for Review">
    </fragment>


<!-- AMENDMENTS - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <!-- Available action for PI when status = ACTIVE/APPROVED -->
    <fragment id="amendment" type="linkedOp" title="Create Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentTabs.xml"  tabsetContainer="amendmentTabs.xfrm" 
        
        op="amendmentOp"
        linkedWhen="active"
        launchLabel="Create Amendment"
        launchMessage="Are you sure you want to create a Amendment?"
        
        linkedOpHandler="amendmentCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Amendment" 
        descriptionLast="" descriptionNext="Amendment">
        <route type="choice" fragment="amd_sendToIntake"
        condition="(this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId || this.hasAccess('SIGNAUTH'));"/>
        
        <route type="choice" fragment="amd_sendToPI"
            condition="this.hasAccess('EDIT')"/>
    </fragment>
    
    <fragment id="amd_sendToPI" type="continuation" title="Review Amendment"
        uri="IRB_v01r00b00_AMDpiReview"  tabset="amendmentTabs.xml"  tabsetContainer="amendmentTabs.xfrm"
        launcherRole="" continuationRole="Admin"
        continuationUserType="pi"
        assignmentHandler=""
        instruction=""
        descriptionLast="Amendment Sent to Intake"
        descriptionNext="Amendment PI Sign-Off"
        createVersion="" 
        passToIntake=""
        op="amendmentOp" 
        linkedOpStatus="piReview">
        
        <route type="static" fragment="amd_sendToIntake"/>
        
    </fragment>

    <!-- Available action for PI when status = SUSPENDED -->
    <fragment id="amendment__susp" type="linkedOp" title="Create Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentTabs.xml"  tabsetContainer="amendmentTabs.xfrm" 
        
        op="amendmentOp"
        linkedWhen="suspended"
        launchLabel="Create Amendment"
        launchMessage="Are you sure you want to create a Amendment?"
        
        linkedOpHandler="amendmentCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Amendment" 
        descriptionLast="" descriptionNext="Amendment">
        
        <route type="static" fragment="amd_sendToIntake"/>
    </fragment>

    <!-- Available action for PI when status = Development Only -->
    <fragment id="amendment__DEVONLY" type="linkedOp" title="Create Amendment"
        uri="IRB_v01r00b00_AMDcreateNew"  tabset="amendmentTabs.xml"  tabsetContainer="amendmentTabs.xfrm" 
        
        op="amendmentOp"
        linkedWhen="DEVONLY"
        launchLabel="Create Amendment"
        launchMessage="Are you sure you want to create a Amendment?"
        
        linkedOpHandler="amendmentCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Amendment" 
        descriptionLast="" descriptionNext="Amendment">
        
        <route type="static" fragment="amd_sendToIntake"/>
    </fragment>

 <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="amd_sendToIntake" type="continuation" title="Assign Amendment to a Analyst"
        uri="IRB_v01r00b00_AMDintakeReview"  tabset="intakeSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        updateReceiptDate="1"
        instruction=""
        descriptionLast="Amendment Sent to Intake"
        descriptionNext="Amendment Being Processed"
        
        createVersion="1" 
        
        passToIntake="1"
        op="amendmentOp" 
        linkedOpStatus="intakeReview">
                
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="amd_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="amd_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="amd_sendToIntakeMicro" type="continuation" title="Assign Amendment to a Analyst"
        uri="IRB_v01r00b00_AMDintakeReview"  tabset="intakeSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        launcherRole="prevreviewer" continuationRole="reviewer"
        instruction=""
        descriptionLast="Amendment Sent to Intake"
        descriptionNext="Amendment Being Processed"               
        op="amendmentOp" 
        passToMicroIntake="1"    
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="amd_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoordMicro"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="amd_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="amd_sendToIntakeReturned" type="continuation" title="Assign Amendment to a Analyst"
        uri="IRB_v01r00b00_AMDintakeReview"  tabset="intakeSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        instruction=""
        descriptionLast="Amendment Sent to Intake"
        descriptionNext="Amendment Being Processed"
        
        passToIntake="1"
        op="amendmentOp" 
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="amd_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="amd_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <!-- AB 01/17/2019 intake RTP set same as coord RTP uri="IRB_v01r00b00_AMDreviseAdmin"  tabset="reviseSetAMD.xml"  tabsetContainer="AMDreviseAdminTabs.xfrm" -->     
    <fragment id="amd_reviseIntake" type="continuation" title="Revise Amendment"        
        uri="IRB_v01r00b00_AMDreviseAdminRS"  tabset="RSSetAMD.xml"  tabsetContainer="amd_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Amendment Requires Revision"
        descriptionNext="Intake Revisions Required"
        returned="1"
        op="amendmentOp" 
        linkedOpStatus="revisions">
        
        <instructions>The Initial Application submission has been returned for revisions by intake, please resubmit.</instructions>
        
        <route type="static"  fragment="amd_returnToIntake"/>
    </fragment>
    <!-- JF:  3/10/17 RITDEV-79 Allow Intake role to use Return to PI action (changed returnBackRS to 0 ) -->
    <!-- AB:  7/10/17 RITDEV-751 Made Return to PI from intake work  -->
    <fragment id="amd_returnToIntake" type="continuation" title="Review changes and Assign Amendment to a Analyst"
        uri="IRB_v01r00b00_AMDintakeReview"  tabset="intakeSetAMDREVRS.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="Amendment Returned to Intake"
        descriptionNext="Amendment Being Processed"
        
        assignmentHandler="assignIntake.js"
        
        returnedBack="1"
        passToIntake="1"
        op="amendmentOp" 
        linkedOpStatus="intakeReview"
        returnedBackRS="0">
                
        <instructions>Review changes and Assign Amendment to a Analyst</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice"  fragment="amd_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="amd_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    
    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="amd_sendToCoord" type="continuation" title="Review Amendment Submission"
        uri="IRB_v01r00b00_AMDcoordReview"  tabset="coordSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="Amendment Sent to Coordinator"
        descriptionNext="Amendment Being Processed"
        
        passToCoord="1"        
        op="amendmentOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review IRB Amendment Submission.</instructions>
        
        <route type="choice"  fragment="amd_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="amd_sendToIntakeMicro"
            condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="amd_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <fragment id="amd_sendToCoordMicro" type="continuation" title="Review Amendment Submission"
        uri="IRB_v01r00b00_AMDcoordReview"  tabset="coordSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        instruction=""
        descriptionLast="Amendment Sent to Coordinator"
        descriptionNext="Amendment Being Processed"
        
        passToMicroCoord="1"
        microOnly="1"
        op="amendmentOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <route type="choice" fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <fragment id="amd_reviseCoord" type="continuation" title="Revise Amendment" 
        uri="IRB_v01r00b00_AMDreviseAdminRS"  tabset="RSSetAMD.xml"  tabsetContainer="amd_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Amendment Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned="1"
        op="amendmentOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Amendment submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static"  fragment="amd_returnToCoordReview"/>
    </fragment>
    <!-- AB 01/13/2017 missing fragment causing a built response submission to go to PI as returned to PI -->
    <fragment id="amd_respondToRS" type="continuation" title="Revise Amendment" 
        uri="IRB_v01r00b00_AMDreviseAdminRS"  tabset="RSSetAMD.xml"  tabsetContainer="amd_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Amendment Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned=""
        op="amendmentOp" 
        linkedOpStatus="revisions"
        passToCoord=""
        >
        
        <instructions>The Amendment submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static" fragment="amd_returnToCoordReview"/>
    </fragment>
    <fragment id="amd_returnToCoordReview" type="continuation" title="Review Amendment Submission"
        uri="IRB_v01r00b00_AMDcoordReview"  tabset="coordSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Amendment Returned to Coordinator"
        descriptionNext="Amendment Being Processed"
        returnedBack="1"
        op="amendmentOp" 
        linkedOpStatus="adminReview"
        returnedBackRS="1"
        
        passToCoord="1"
        >
        
        <instructions>Review changes the IRB Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice"  fragment="amd_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="amd_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="amd_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    

    <fragment id="amd_returnToCoord" type="continuation" title="Review Amendment Submission"
        uri="IRB_v01r00b00_AMDcoordReview"  tabset="coordSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Amendment Returned to Coordinator"
        descriptionNext="Amendment Being Processed"
        returned="1"
        passToCoord="1"
        op="amendmentOp" 
        linkedOpStatus="adminReview"
        returnedBack ="1"
        returnedBackRS=""
        
        >
                
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        <route type="choice" fragment="amd_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="amd_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="amd_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="amd_sendToDirector" type="continuation" title="Please Handle the Amendment Submission"
        uri="IRB_v01r00b00_AMDdirectorReview"  tabset="directorSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Amendment Escalated to Director"
        descriptionNext="Amendment Being Processed"
        
        passToDirector="1"        
        op="amendmentOp" 
        linkedOpStatus="directorReview">
        
        
        <instructions>The Initial Application submission has been escalated by the previous administrator, please review.</instructions>
        
        <route type="choice"  fragment="amd_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="amd_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="amd_reviseDirector" type="continuation" title="Revise Amendment" 
        uri="IRB_v01r00b00_AMDreviseAdminRS"  tabset="RSSetAMD.xml"  tabsetContainer="amd_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Amendment Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        op="amendmentOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="amd_returnToDirector"/>
    </fragment>

    <fragment id="amd_returnToDirector" type="continuation" title="Please Handle the Amendment Submission"
        uri="IRB_v01r00b00_AMDdirectorReview"  tabset="directorSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Amendment Returned to Director"
        descriptionNext="Amendment Being Processed"
        returnedBack="1"
        op="amendmentOp" 
        linkedOpStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="amd_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="amd_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    <fragment id="amd_sendToDirectorFromIntake" type="continuation" title="Please Handle the Amendment Submission"
        uri="IRB_v01r00b00_AMDdirectorReview"  tabset="directorSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Amendment Escalated to Director"
        descriptionNext="Amendment Being Processed"
        
        passToDirector="1"
        op="amendmentOp" 
        linkedOpStatus="directorReview">
        
        <instructions>The Initial Application submission has been escalated by intake, please review.</instructions>
        
        <route type="choice"  fragment="amd_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="amd_sendToIntakeReturned"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="amd_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>

    </fragment>
    
    <fragment id="amd_reviseDirectorFromIntake" type="continuation" title="Revise Amendment" 
        uri="IRB_v01r00b00_AMDreviseAdmin"  tabset="reviseSetAMD.xml"  tabsetContainer="AMDreviseAdminTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Amendment Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        op="amendmentOp" 
        linkedOpStatus="revisions"
        
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="amd_returnToDirectorFromIntake"/>
    </fragment>
    
    <fragment id="amd_returnToDirectorFromIntake" type="continuation" title="Please Handle the Amendment Submission"
        uri="IRB_v01r00b00_AMDdirectorReview"  tabset="directorSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Amendment Returned to Director"
        descriptionNext="Amendment Being Processed"
        returnedBack="1"
        op="amendmentOp" 
        linkedOpStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="amd_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="amd_sendToIntake"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="amd_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>
    </fragment>

    <!-- First Review -->
<!--    <fragment id="amd_sendToDeptRev" type="continuation" title="Review Protocol Amendment"
        uri="IRB_v01r00b00_AMDdeptReview" 
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDeptReviewer.js"
        
        instruction="" 
        descriptionLast="PI Initiated Amendment of IRB Protocol"
        descriptionNext="Amendment Sent for Departmental Review" 
        
        op="amendmentOp"
        linkedOpStatus="deptReview"
        linkedOpHandler="amendmentCreateReview.js">

        <route type="choice" fragment="amd_sendToCentralAdmin"
            condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="amd_revise"
            condition="data.getValue('passFail') == '0';"/>
    </fragment>-->

    <!-- First Review (Requires Revision) -->
    <!--<fragment id="amd_revise" type="continuation" title="Revise Protocol Amendment"
        uri="IRB_v01r00b00_AMDrevise" 
        launcherRole="reviewer" continuationRole="ContactPI"
        continuationUserType="owner" 
        
        instruction=""
        descriptionLast="Amendment Requires Revision"
        descriptionNext="Departmental Revisions Required" 
        
        op="amendmentOp" 
        linkedOpStatus="revisions"
        linkedOpHandler="amendmentAdvanceReview.js">
        
        <route type="static" fragment="amd_sendToRevRev"/>
    </fragment>-->
    
    


    <!-- Central Review / Intake - Assigns Next Steps, including Reassignment (to a different Coordinator) -->
<!--    <fragment id="amd_sendToCentralAdmin" type="continuation" title="Process Amendment Submission"
        uri="IRB_v01r00b00_AMDcentralReview" 
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction="" 
        descriptionLast="Amendment Sent to Central Admin"
        descriptionNext="Amendment Being Prepared for Board" 
        
        op="amendmentOp"
        linkedOpStatus="routing"
        
        passToIntake="1">

        <route type="choice" fragment="amd_ReassignCentralAdmin"
                condition="data.getValue('newCoor[last()]') == '1'"/>
        <route type="choice" fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
    </fragment>-->
    
    <!-- Central Review / Intake (when reassigned) - Assigns Next Steps, including Reassignment (to a different Coordinator) -->
<!--    <fragment id="amd_ReassignCentralAdmin" type="continuation" title="Process Amendment Submission"
        uri="IRB_v01r00b00_AMDcentralReview"
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor" 
        
        instruction=""
        descriptionLast="Amendment Reassigned to Different Central Admin"
        descriptionNext="Amendment Being Prepared for Board" 
        
        op="amendmentOp" 
        linkedOpStatus="routing">
        
        <route type="choice" fragment="amd_ReassignCentralAdmin"
            condition="data.getValue('newCoor[last()]') == '1'"/>
        <route type="choice" fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
    </fragment>-->


<!--    <fragment id="amd_respondToRS" type="continuation" title="Modifications Required for Amendment" uri="IRB_v01r00b00_AMDreviseRS"
        launcherRole="reviewer" continuationRole="ContactPI" continuationUserType="owner"
        continuationUser="" instruction="" descriptionLast="Amendment Response Submission Sent to PI"
        descriptionNext="Modifications Required">
        <!-\- Might change the status to "In Revision" or something like that -\->
        <route type="static" fragment="amd_reviewRS"/>
    </fragment>-->
    
<!--    <fragment id="amd_reviewRS" type="continuation" title="Review Amendment Revisions"
        uri="IRB_v01r00b00_AMDReviewRS" launcherRole="admin" continuationRole="reviewer"
        continuationUserType="namedRole" continuationUser="centralAdmin" instruction=""
        descriptionLast="Amendment Revisions Complete"
        descriptionNext="Amendment Revisions being Reviewed" newStatus="deptReview">
        
        <route type="choice" fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'"/>
        
        <route type="choice" fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/>
        
        <route type="choice" fragment="amd_sendToBoard"
        condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0'"/>        
        
        <!-\- Probably include a different sendback segment just with different language here (so the lifecycle history reads better), but send back to the same fragment -\->
        <route type="choice" fragment="amd_respondToRS" condition="data.getValue('passFail') == '0';"/>
    </fragment>-->

    <fragment id="amd_determineProtocol" type="end" title="Render Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" instruction="" descriptionLast="Amendment Reviewed"
        descriptionNext="Amendment Reviewed" linkedOpHandler="amendment_calculateDecision.js" op="amendmentOp"> </fragment>

    <!-- Micro mods required determination process fragment ends with the build of Micro RS -->
    <fragment id="amd_determineProtocolMicro" type="end" title="Render Micro Office Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" instruction="" descriptionLast="Review determination set by Micro office"
        descriptionNext="Amendment Awaiting IRB Response Submission Review" linkedOpHandler="amendment_calculateDecisionMicro.js" op="amendmentOp"></fragment>

    <fragment id="amd_sendToBoard" type="end" title="Decide on Amendment"
        uri="IRB_v01r00b00_AMDboardReview"  tabset="amd_boardSet.xml"  tabsetContainer="amd_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="amendmentOp" instruction=""
        descriptionLast="Amendment Sent to Board Meeting"
        descriptionNext="Amendment Awaiting Review by Board" linkedOpStatus="boardReview"
        linkedOpHandler="amd_sendToBoard.js" >
    </fragment>
    <fragment id="amd_sendToBoardMicro" type="end" title="Decide on Amendment"
        uri="IRB_v01r00b00_AMDboardReview"  tabset="amd_boardSet.xml"  tabsetContainer="amd_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="amendmentOp" instruction=""
        descriptionLast="Amendment Sent to Board Meeting"
        descriptionNext="Amendment Awaiting Review by Board" linkedOpStatus="boardReview"
         >
    </fragment>
    
    <fragment id="amd_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_AMDcoordReview"  tabset="coordSetAMD.xml"  tabsetContainer="AMDReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="SENDER"
        
        instruction=""
        descriptionLast="Board Review Complete"
        descriptionNext="Results Being Processed"
        returnedBack="1"
        op="amendmentOp" 
        linkedOpStatus="adminReview"
        returnedBackRS="1"
        
        passToCoord="1"
        >
        
        <instructions>Review Board Decision the IRB Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
 <!--       <route type="choice"  fragment="amd_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>-->
        
        <route type="choice"  fragment="amd_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="amd_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="amd_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="amd_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        
        <route type="choice"  fragment="amd_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    


    <fragment id="amd_establishProtocol" type="end" title="Activate" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="amendmentOp" instruction=""
        descriptionLast="Amendment Established" descriptionNext="Amendment Active"
        linkedOpStatus="active" linkedOpHandler="amendment_establish.js">
    </fragment>

    <fragment id="amd_leaveProtocol" type="end" title="Deferred" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="amendmentOp" instruction="" descriptionLast="Amendment Deferred"
        descriptionNext="Amendment Waiting for Next Board Meeting" linkedOpStatus="deferred">
        <!--newStatus="deferred"    linkedOpHandler="defer.js"-->
    </fragment>

    <fragment id="amd_rejectProtocol" type="end" title="Declined" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="amendmentOp" instruction="" descriptionLast="Amendment Declined"
        descriptionNext="Amendment Not Established" linkedOpStatus="rejected">
        <!--newStatus="rejected"  linkedOpHandler="decline.js"-->
    </fragment>


    <!-- External Review Step - Standalone Adhoc Fragment(s) -->
    <fragment id="amd_externalRev" type="linkedOpRev" title="Review Amendment"
        uri="IRB_v01r00b00_AMDdeptReview" tabset="amd_reviewSet.xml" tabsetContainer="amd_reviewTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="special" continuationUser="centralAdmin" op="amendmentOp"
        instruction="" descriptionLast="" linkedOpStatus="externalReview"
        descriptionNext="Amendment Sent for Review"> </fragment>



<!-- RENEWAL - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <!-- Available action for PI when status = ACTIVE/APPROVED -->
    <fragment id="renewal" type="linkedOp" title="Create Continuing Review"
        uri="IRB_v01r00b00_RENcreateNew"  tabset="renewalTabs.xml"  tabsetContainer="renewalTabs.xfrm" 
        
        op="renewalOp"
        linkedWhen="active"
        launchLabel="Create Continuing Review"
        launchMessage="Are you sure you want to create a Continuing Review?"
        
        linkedOpHandler="renewalCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Continuing Review" 
        descriptionLast="" descriptionNext="Continuing Review">
        <route type="choice" fragment="ren_sendToIntake"
            condition="(this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId || this.hasAccess('SIGNAUTH'));"/>
        
        <route type="choice" fragment="ren_sendToPI"
            condition="this.hasAccess('EDIT')"/>
        
        
    </fragment>

    <fragment id="ren_sendToPI" type="continuation" title="Review Continuing Review"
        uri="IRB_v01r00b00_RENpiReview"  tabset="renewalTabs.xml"  tabsetContainer="renewalTabs.xfrm"
        launcherRole="" continuationRole="Admin"
        continuationUserType="pi"
        assignmentHandler=""
        
        instruction=""
        descriptionLast="Continuing Review Sent to Intake"
        descriptionNext="Continuing Review PI Sign-Off"
        createVersion="" 
        passToIntake=""
        op="renewalOp" 
        linkedOpStatus="piReview">
        
        <route type="static" fragment="ren_sendToIntake"/>
        
    </fragment>

    <!-- Available action for PI when status = SUSPENDED -->
    <fragment id="renewal_susp" type="linkedOp" title="Create Continuing Review"
        uri="IRB_v01r00b00_RENcreateNew"  tabset="renewalTabs.xml"  tabsetContainer="renewalTabs.xfrm" 
        
        op="renewalOp"
        linkedWhen="suspended"
        launchLabel="Create Continuing Review"
        launchMessage="Are you sure you want to create a Continuing Review?"
        
        linkedOpHandler="renewalCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Continuing Review" 
        descriptionLast="" descriptionNext="Continuing Review">
        
        <route type="static" fragment="ren_sendToIntake"/>
    </fragment>
    
    <!-- Available action for PI when status = EXPIRED -->
    <fragment id="renewal_exp" type="linkedOp" title="Create Continuing Review"
        uri="IRB_v01r00b00_RENcreateNew"  tabset="renewalTabs.xml"  tabsetContainer="renewalTabs.xfrm" 
        
        op="renewalOp"
        linkedWhen="expired"
        launchLabel="Create Continuing Review"
        launchMessage="Are you sure you want to create a Continuing Review?"
        
        linkedOpHandler="renewalCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Continuing Review" 
        descriptionLast="" descriptionNext="Continuing Review">
        
        <route type="static" fragment="ren_sendToIntake"/>
    </fragment>
  
      <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="ren_sendToIntake" type="continuation" title="Assign Continuing Review to a Analyst"
        uri="IRB_v01r00b00_RENintakeReview"  tabset="intakeSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        createVersion="1" 
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="Continuing Review Sent to Intake"
        descriptionNext="Continuing Review Being Processed"
        updateReceiptDate="1"
        passToIntake="1"
        op="renewalOp" 
        linkedOpStatus="intakeReview">
                
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="ren_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="ren_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="ren_sendToIntakeMicro" type="continuation" title="Assign Continuing Review to a Analyst"
        uri="IRB_v01r00b00_RENintakeReview"  tabset="intakeSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="Continuing Review Sent to Intake"
        descriptionNext="Continuing Review Being Processed"
                
        op="renewalOp" 
        passToMicroIntake="1"    
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="ren_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoordMicro"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="ren_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="ren_sendToIntakeReturned" type="continuation" title="Assign Continuing Review to a Analyst"
        uri="IRB_v01r00b00_RENintakeReview"  tabset="intakeSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="Continuing Review Sent to Intake"
        descriptionNext="Continuing Review Being Processed"
        
        passToIntake="1"
        op="renewalOp" 
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="ren_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="ren_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    <!-- uri="IRB_v01r00b00_RENreviseAdmin"  tabset="reviseSetREN.xml"  tabsetContainer="RENreviseAdminTabs.xfrm" -->
    <fragment id="ren_reviseIntake" type="continuation" title="Revise Continuing Review" 
        uri="IRB_v01r00b00_RENreviseAdminRS"  tabset="RSSetREN.xml"  tabsetContainer="ren_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Continuing Review Requires Revision"
        descriptionNext="Intake Revisions Required"
        returned="1"
        op="renewalOp" 
        linkedOpStatus="revisions">
        
        <instructions>The Initial Application submission has been returned for revisions by intake, please resubmit.</instructions>
        
        <route type="static"  fragment="ren_returnToIntake"/>
    </fragment>
    <!-- JF:  3/10/17 RITDEV-79 Allow Intake role to use Return to PI action (change returnedBackRS to 0)-->
    <!-- AB:  7/10/17 RITDEV-751 Made Return to PI from intake work  -->
    <fragment id="ren_returnToIntake" type="continuation" title="Review changes and Assign Continuing Review to a Analyst"
        uri="IRB_v01r00b00_RENintakeReview"  tabset="intakeSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="Continuing Review Returned to Intake"
        descriptionNext="Continuing Review Being Processed"
        
        assignmentHandler="assignIntake.js"
        
        returnedBack="1"
        passToIntake="1"
        op="renewalOp" 
        linkedOpStatus="intakeReview"
        returnedBackRS="0">
                
        <instructions>Review changes and Assign Continuing Review to a Analyst</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice"  fragment="ren_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="ren_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    
    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="ren_sendToCoord" type="continuation" title="Review Continuing Review Submission"
        uri="IRB_v01r00b00_RENcoordReview"  tabset="coordSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="Continuing Review Sent to Coordinator"
        descriptionNext="Continuing Review Being Processed"
        
        passToCoord="1"        
        op="renewalOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="ren_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="ren_sendToIntakeMicro"
            condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="ren_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <fragment id="ren_sendToCoordMicro" type="continuation" title="Review Continuing Review Submission"
        uri="IRB_v01r00b00_RENcoordReview"  tabset="coordSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="Continuing Review Sent to Coordinator"
        descriptionNext="Continuing Review Being Processed"
        
        passToMicroCoord="1"
        microOnly="1"
        op="renewalOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    <!-- Analyst RTP -->
    <fragment id="ren_reviseCoord" type="continuation" title="Revise Continuing Review" 
        uri="IRB_v01r00b00_RENreviseAdminRS"  tabset="RSSetREN.xml"  tabsetContainer="ren_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Continuing Review Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned="1"
        op="renewalOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Continuing Review submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static"  fragment="ren_returnToCoordReview"/>
    </fragment>
    
    <fragment id="ren_returnToCoordReview" type="continuation" title="Review Continuing Review Submission"
        uri="IRB_v01r00b00_RENcoordReview"  tabset="coordSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Continuing Review Returned to Coordinator"
        descriptionNext="Continuing Review Being Processed"
        returnedBack="1"
        op="renewalOp" 
        linkedOpStatus="adminReview"
        returnedBackRS="1"
        
        passToCoord="1"
        >
        
        <instructions>Review changes the IRB Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        <route type="choice" fragment="ren_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="ren_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="ren_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        <!-- AB 1/13/2017 send to board not allowed for MACRO-->
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    

    <fragment id="ren_returnToCoord" type="continuation" title="Review Continuing Review Submission"
        uri="IRB_v01r00b00_RENcoordReview"  tabset="coordSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Continuing Review Returned to Coordinator"
        descriptionNext="Continuing Review Being Processed"
        returned="1"
        passToCoord="1"
        op="renewalOp" 
        linkedOpStatus="adminReview"
        returnedBack ="1"
        returnedBackRS=""
        >
                
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        <route type="choice" fragment="ren_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="ren_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="ren_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="ren_sendToDirector" type="continuation" title="Please Handle the Continuing Review Submission"
        uri="IRB_v01r00b00_RENdirectorReview"  tabset="directorSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Continuing Review Escalated to Director"
        descriptionNext="Continuing Review Being Processed"
        
        passToDirector="1"        
        op="renewalOp" 
        linkedOpStatus="directorReview">
        
        
        <instructions>The Initial Application submission has been escalated by the previous administrator, please review.</instructions>
        
        <route type="choice"  fragment="ren_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="ren_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="ren_reviseDirector" type="continuation" title="Revise Continuing Review" 
        uri="IRB_v01r00b00_RENreviseAdminRS"  tabset="RSSetREN.xml"  tabsetContainer="ren_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Continuing Review Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned=""
        op="renewalOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="ren_returnToDirector"/>
    </fragment>

    <fragment id="ren_returnToDirector" type="continuation" title="Please Handle the Continuing Review Submission"
        uri="IRB_v01r00b00_RENdirectorReview"  tabset="directorSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Continuing Review Returned to Director"
        descriptionNext="Continuing Review Being Processed"
        returnedBack="1"
        op="renewalOp" 
        linkedOpStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="ren_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="ren_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    <fragment id="ren_sendToDirectorFromIntake" type="continuation" title="Please Handle the Continuing Review Submission"
        uri="IRB_v01r00b00_RENdirectorReview"  tabset="directorSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Continuing Review Escalated to Director"
        descriptionNext="Continuing Review Being Processed"
        
        passToDirector="1"
        op="renewalOp" 
        linkedOpStatus="directorReview"
        >
        
        <instructions>The Initial Application submission has been escalated by intake, please review.</instructions>
        
        <route type="choice"  fragment="ren_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="ren_sendToIntakeReturned"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="ren_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>

    </fragment>
    
    <fragment id="ren_reviseDirectorFromIntake" type="continuation" title="Revise Continuing Review" 
        uri="IRB_v01r00b00_RENreviseAdmin"  tabset="reviseSetREN.xml"  tabsetContainer="RENreviseAdminTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Continuing Review Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        op="renewalOp" 
        linkedOpStatus="revisions"
        
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="ren_returnToDirectorFromIntake"/>
    </fragment>
    
    <fragment id="ren_returnToDirectorFromIntake" type="continuation" title="Please Handle the Continuing Review Submission"
        uri="IRB_v01r00b00_RENdirectorReview"  tabset="directorSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Continuing Review Returned to Director"
        descriptionNext="Continuing Review Being Processed"
        returnedBack="1"
        op="renewalOp" 
        linkedOpStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="ren_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="ren_sendToIntake"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="ren_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>
    </fragment>
  
    <!-- First Review -->
   <!-- <fragment id="ren_sendToDeptRev" type="continuation" title="Review Continuing Review"
        uri="IRB_v01r00b00_RENdeptReview" 
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDeptReviewer.js"
        
        instruction=""
        descriptionLast="PI Initiated Renewal of IRB Protocol"
        descriptionNext="Continuing Review Sent for Departmental Review" 
        
        op="renewalOp" 
        linkedOpStatus="deptReview"
        linkedOpHandler="renewalCreateReview.js">

        <route type="choice" fragment="ren_sendToCentralAdmin"
                condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="ren_revise" 
                condition="data.getValue('passFail') == '0';"/>
    </fragment>

    <!-\- First Review (Requires Revision) -\->
    <fragment id="ren_revise" type="continuation" title="Revise Continuing Review"
        uri="IRB_v01r00b00_RENrevise" 
        launcherRole="reviewer" continuationRole="ContactPI"
        continuationUserType="owner" 
        
        instruction=""
        descriptionLast="Continuing Review Requires Revision"
        descriptionNext="Departmental Revisions Required" 
        
        op="renewalOp" 
        linkedOpStatus="revisions"
        linkedOpHandler="renewal_advanceSubReview.js">
        
        <route type="static" fragment="ren_sendToRevRev"/>
    </fragment>

    <!-\- First Review (Review Revisions, Suggest Further Changes or Accept) -\->
    <fragment id="ren_sendToRevRev" type="continuation" title="Review Continuing Review Revisions"
        uri="IRB_v01r00b00_RENReviewReview" 
        
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDeptReviewer.js"
        
        instruction=""
        descriptionLast="Continuing Review Revisions Complete"
        descriptionNext="Continuing Review Revisions being Reviewed" 
        
        op="renewalOp" 
        linkedOpStatus="deptReview">

        <route type="choice" fragment="ren_sendToCentralAdmin"
                condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="ren_revise" 
                condition="data.getValue('passFail') == '0';"/>
    </fragment>


    <!-\- Central Review / Intake - Assigns Next Steps, including Reassignment (to a different Coordinator) -\->
    <fragment id="ren_sendToCentralAdmin" type="continuation"
        title="Process Continuing Review Submission" uri="IRB_v01r00b00_RENcentralReview"
        launcherRole="prevreviewer" continuationRole="reviewer" 
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="Continuing Review Sent to Central Admin"
        descriptionNext="Continuing Review Being Prepared for Board" 
        
        op="renewalOp" 
        linkedOpStatus="routing"
        linkedOpHandler="renewal_promoteSubReview.js"
        
        passToIntake="1">

        <route type="choice" fragment="ren_ReassignCentralAdmin"
                condition="data.getValue('newCoor[last()]') == '1'"/>
        <route type="choice" fragment="ren_determineProtocol"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="ren_respondToRS"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="ren_sendToBoard"
                condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
    </fragment>

    <!-\- Central Review / Intake (when reassigned) - Assigns Next Steps, including Reassignment (to a different Coordinator) -\->
    <fragment id="ren_ReassignCentralAdmin" type="continuation" title="Process Continuing Review Submission" 
        uri="IRB_v01r00b00_RENcentralReview"
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Continuing Review Reassigned to Different Central Admin"
        descriptionNext="Continuing Review Being Prepared for Board"
        
        op="renewalOp" 
        linkedOpStatus="routing">
        
        <route type="choice" fragment="ren_ReassignCentralAdmin"
                condition="data.getValue('newCoor[last()]') == '1'"/>
        <route type="choice" fragment="ren_determineProtocol"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="ren_respondToRS"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="ren_sendToBoard"
                condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
    </fragment>-->

    <!-- AB 1/13/2017 below was incorrect-->
    <!-- uri="IRB_v01r00b00_RENreviseRS"  tabset="ren_piRS.xml"  tabsetContainer="ren_reviseTabsRS.xfrm" -->
    <fragment id="ren_respondToRS" type="continuation" title="Modifications Required for Continuing Review"         
        uri="IRB_v01r00b00_RENreviseAdminRS"  tabset="RSSetREN.xml"  tabsetContainer="ren_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        continuationUser="" op="renewalOp" 
        instruction="" 
        descriptionLast="Continuing Review Response Submission Sent to PI"
        descriptionNext="Modifications Required">
        <!--needed to be ownerIn not owner-->
        <!-- Might change the status to "In Revision" or something like that -->
        <!-- AB 1/13/2017 needs to go back to ren_returnToCoordReview not  ren_reviewRS-->
        <!--<route type="static" fragment="ren_reviewRS"/>-->
        <route type="static"  fragment="ren_returnToCoordReview"/>
    </fragment>
    
    <!--<fragment id="ren_reviewRS" type="continuation" title="Review Continuing Review Revisions"
        uri="IRB_v01r00b00_RENReviewRS"  tabset="ren_returnedRS.xml"  tabsetContainer="ren_reviewTabsRS.xfrm" launcherRole="admin" continuationRole="reviewer"
        continuationUserType="namedRole" continuationUser="centralAdmin" op="renewalOp" instruction=""
        descriptionLast="Continuing Review Revisions Complete"
        descriptionNext="Continuing Review Revisions being Reviewed" newStatus="deptReview">
        
        <route type="choice" fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'"/>
        
        <route type="choice" fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/>
        
        <route type="choice" fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0'"/>          
        <!-\- Probably include a different sendback segment just with different language here (so the lifecycle history reads better), but send back to the same fragment -\->
        <route type="choice" fragment="ren_respondToRS" condition="data.getValue('passFail') == '0';"/>
    </fragment>-->

    <fragment id="ren_determineProtocol" type="end" title="Render Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="renewalOp" instruction="" descriptionLast="Continuing Review Reviewed"
        descriptionNext="Continuing Review Reviewed" linkedOpStatus="active" linkedOpHandler="renewal_calculateDecision.js"> </fragment>

    <fragment id="ren_determineProtocolMicro" type="end" title="Render Micro Office Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="renewalOp" instruction="" descriptionLast="Review determination set by Micro office"
        descriptionNext="Continuing Review Awaiting IRB Response Submission Review" linkedOpHandler="renewal_calculateDecisionMicro.js" ></fragment>

    <fragment id="ren_sendToBoard" type="end" title="Decide on Continuing Review"
        uri="IRB_v01r00b00_RENboardReview"  tabset="ren_boardSet.xml"  tabsetContainer="ren_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="renewalOp" instruction=""
        descriptionLast="Continuing Review Sent to Board Meeting"
        descriptionNext="Continuing Review Awaiting Review by Board" linkedOpStatus="boardReview"
        linkedOpHandler="ren_sendToBoard.js">
        <!--<route type="static" fragment="end"/>-->
    </fragment>

    <fragment id="ren_sendToBoardMicro" type="end" title="Decide on Continuing Review"
        uri="IRB_v01r00b00_RENboardReview"  tabset="ren_boardSet.xml"  tabsetContainer="ren_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="renewalOp" instruction=""
        descriptionLast="Continuing Review Sent to Board Meeting"
        descriptionNext="Continuing Review Awaiting Review by Board" linkedOpStatus="boardReview"
        >
    </fragment><!-- linkedOpHandler="ren_sendToBoardMicro.js" -->
    
    <!--<fragment id="ren_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_RENcentralReturn" launcherRole="board" continuationRole="reviewer"
        continuationUserType="coor" op="renewalOp" instruction=""
        descriptionLast="Board Review Complete" descriptionNext="Results Being Processed"
        linkedOpStatus="processingBoardRev">
        <route type="choice" fragment="ren_respondToRS"
            condition="(data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/> <!-\- This one sends out the Reponse submision as in the central review if there is no board meeting -\->
        <route type="choice" fragment="ren_establishProtocol" condition="data.getValue('decision') != 'mod'"/>  
    </fragment>-->
    
    <fragment id="ren_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_RENcoordReview"  tabset="coordSetREN.xml"  tabsetContainer="RENReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="SENDER"
        
        instruction=""
        descriptionLast="Board Review Complete"
        descriptionNext="Results Being Processed"
        returnedBack="1"
        op="renewalOp" 
        linkedOpStatus="adminReview"
        returnedBackRS="1"
        
        passToCoord="1"
        >
        
        <instructions>Review Board Decision the IRB Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
<!--        <route type="choice"  fragment="ren_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>-->
        
        <route type="choice"  fragment="ren_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="ren_sendToDirector"
        condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="ren_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Estalished Determining Review"/>
        
        <route type="choice"  fragment="ren_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <!--<route type="choice"  fragment="ren_determineProtocolMicro"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="ren_determineProtocolMicro"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>-->
        
        <route type="choice"  fragment="ren_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="ren_establishProtocol" type="end" title="Activate" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="renewalOp" instruction=""
        descriptionLast="Continuing Review Established" descriptionNext="Continuing Review Active"
        linkedOpStatus="active" linkedOpHandler="renewal_establish.js">
        <!--newStage="protocol"
        newStatus="active" linkedOpHandler="establish.js"-->
    </fragment>

    <fragment id="ren_leaveProtocol" type="end" title="Deferred" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="renewalOp" instruction="" descriptionLast="Continuing Review Deferred"
        descriptionNext="Continuing Review Waiting for Next Board Meeting" linkedOpStatus="deferred">
        <!--newStatus="deferred" linkedOpHandler="defer.js" -->
    </fragment>

    <fragment id="ren_rejectProtocol" type="end" title="Declined" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="renewalOp" instruction="" descriptionLast="Continuing Review Declined"
        descriptionNext="Continuing Review Not Established" linkedOpStatus="rejected">
        <!--newStatus="rejected"  linkedOpHandler="decline.js"-->
    </fragment>


    <!-- External Review Step - Standalone Adhoc Fragment(s) -->
    <fragment id="ren_externalRev" type="linkedOpRev" title="Review Continuing Review"
        uri="IRB_v01r00b00_RENdeptReview" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="special" continuationUser="centralAdmin" op="renewalOp" instruction=""
        descriptionLast="" linkedOpStatus="externalReview"
        descriptionNext="Continuing Review Sent for Review"> </fragment>





<!-- New Information - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    
    <!-- Available action for PI when status = ACTIVE/APPROVED -->
    <fragment id="unantiProb" type="linkedOp" title="Create New Information"
        uri="IRB_v01r00b00_UPcreateNew"  tabset="unantiProbTabs.xml"  tabsetContainer="unantiProbTabs.xfrm" 
        
        op="problemOp"
        linkedWhen="active"
        launchLabel="Create New Information"
        launchMessage="Are you sure you want to create an New Information?"
        
        linkedOpHandler="unantiprobCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create New Information" 
        descriptionLast="" descriptionNext="New Information">
        
        <route type="choice" fragment="up_sendToIntake"
            condition="(this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId || this.hasAccess('SIGNAUTH'));"/>
        
        <route type="choice" fragment="up_sendToPI"
            condition="this.hasAccess('EDIT')"/>
        
    </fragment>
    
    <fragment id="up_sendToPI" type="continuation" title="Review New Information"
        uri="IRB_v01r00b00_UPpiReview"  tabset="unantiProbTabs.xml"  tabsetContainer="unantiProbTabs.xfrm"
        launcherRole="" continuationRole="Admin"
        continuationUserType="pi"
        assignmentHandler=""
        
        instruction=""
        descriptionLast="New Information Sent to Intake"
        descriptionNext="New Information PI Sign-Off"
        createVersion="" 
        passToIntake=""
        op="problemOp" 
        linkedOpStatus="piReview">
        
        <route type="static" fragment="up_sendToIntake"/>
        
    </fragment>
    
  
    <!-- Available action for PI when status = EXPIRED -->
    <fragment id="unantiProb_exp" type="linkedOp" title="Create New Information"
        uri="IRB_v01r00b00_UPcreateNew"  tabset="unantiProbTabs.xml"  tabsetContainer="unantiProbTabs.xfrm" 
        
        op="problemOp"
        linkedWhen="expired"
        launchLabel="Create New Information"
        launchMessage="Are you sure you want to create an New Information?"
        
        linkedOpHandler="unantiprobCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create New Information" 
        descriptionLast="" descriptionNext="New Information">
        
        <route type="static" fragment="up_sendToIntake"/>
    </fragment>
    
    <!-- Available action for PI when status = SUSPENDED -->
    <fragment id="unantiProb_susp" type="linkedOp" title="Create New Information"
        uri="IRB_v01r00b00_UPcreateNew"  tabset="unantiProbTabs.xml"  tabsetContainer="unantiProbTabs.xfrm" 
        
        op="problemOp"
        linkedWhen="suspended"
        launchLabel="Create New Information"
        launchMessage="Are you sure you want to create an New Information?"
        
        linkedOpHandler="unantiprobCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create New Information" 
        descriptionLast="" descriptionNext="New Information">
        
        <route type="static" fragment="up_sendToIntake"/>
    </fragment>    
    
    <!-- Available action for PI when status = TERMINATED -->
    <fragment id="unantiProb_term" type="linkedOp" title="Create New Information"
        uri="IRB_v01r00b00_UPcreateNew"  tabset="unantiProbTabs.xml"  tabsetContainer="unantiProbTabs.xfrm" 
        
        op="problemOp"
        linkedWhen="terminated"
        launchLabel="Create New Information"
        launchMessage="Are you sure you want to create an New Information?"
        
        linkedOpHandler="unantiprobCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create New Information" 
        descriptionLast="" descriptionNext="New Information">
        
        <route type="static" fragment="up_sendToIntake"/>
    </fragment>    
    
    <!-- Available action for PI when status = COMPLETED -->
    <fragment id="unantiProb_comp" type="linkedOp" title="Create New Information"
        uri="IRB_v01r00b00_UPcreateNew"  tabset="unantiProbTabs.xml"  tabsetContainer="unantiProbTabs.xfrm" 
        
        op="problemOp"
        linkedWhen="completed"
        launchLabel="Create New Information"
        launchMessage="Are you sure you want to create an New Information?"
        
        linkedOpHandler="unantiprobCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create New Information" 
        descriptionLast="" descriptionNext="New Information">
        
        <route type="static" fragment="up_sendToIntake"/>
    </fragment>   
     
     <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="up_sendToIntake" type="continuation" title="Assign New Information to a Analyst"
        uri="IRB_v01r00b00_UPintakeReview"
        updateReceiptDate="1"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="New Information Sent to Intake"
        descriptionNext="New Information Being Processed"
        
        passToIntake="1"
        op="problemOp" 
        linkedOpStatus="intakeReview">
                
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="up_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="up_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="up_sendToIntakeMicro" type="continuation" title="Assign New Information to a Analyst"
        uri="IRB_v01r00b00_UPintakeReview"
        
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="New Information Sent to Intake"
        descriptionNext="New Information Being Processed"
        
        op="problemOp" 
        passToMicroIntake="1"    
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="up_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoordMicro"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="up_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="up_sendToIntake" type="continuation" title="Assign New Information to a Analyst"
        uri="IRB_v01r00b00_UPintakeReview"
        createVersion="1"
        updateReceiptDate="1"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="New Information Sent to Intake"
        descriptionNext="New Information Being Processed"
        
        passToIntake="1"
        op="problemOp" 
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="up_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="up_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="up_sendToIntakeReturned" type="continuation" title="Assign New Information to a Analyst"
        uri="IRB_v01r00b00_UPintakeReview"
        updateReceiptDate=""
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="New Information Sent to Intake"
        descriptionNext="New Information Being Processed"
        
        passToIntake="1"
        op="problemOp" 
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="up_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="up_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    <!-- uri="IRB_v01r00b00_UPreviseAdmin"  tabset="reviseSetUP.xml"  tabsetContainer="UPreviseAdminTabs.xfrm" -->
    <fragment id="up_reviseIntake" type="continuation" title="Revise New Information" 
        uri="IRB_v01r00b00_UPreviseAdminRS"  tabset="RSSetUP.xml"  tabsetContainer="up_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="New Information Requires Revision"
        descriptionNext="Intake Revisions Required"
        returned="1"
        op="problemOp" 
        linkedOpStatus="revisions">
        
        <instructions>The Initial Application submission has been returned for revisions by intake, please resubmit.</instructions>
        
        <route type="static"  fragment="up_returnToIntake"/>
    </fragment>
    <!-- JF:  3/10/17 RITDEV-79 Allow Intake role to use Return to PI action  (changed returnBackRS to 0) -->
    <!-- AB:  7/10/17 RITDEV-751 Made Return to PI from intake work  -->
    <fragment id="up_returnToIntake" type="continuation" title="Review changes and Assign New Information to a Analyst"
        uri="IRB_v01r00b00_UPintakeReview"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="New Information Returned to Intake"
        descriptionNext="New Information Being Processed"
        
        assignmentHandler="assignIntake.js"
        
        returnedBack="1"
        passToIntake="1"
        op="problemOp" 
        linkedOpStatus="intakeReview"
        returnedBackRS="0">
                
        <instructions>Review changes and Assign New Information to a Analyst</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice"  fragment="up_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="up_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    
    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="up_sendToCoord" type="continuation" title="Review New Information Submission"
        uri="IRB_v01r00b00_UPcoordReview"  tabset="coordSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="New Information Sent to Coordinator"
        descriptionNext="New Information Being Processed"
        
        passToCoord="1"        
        op="problemOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review New Information submission.</instructions>
        
        <route type="choice"  fragment="up_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="up_sendToIntakeMicro"
            condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="up_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <fragment id="up_sendToCoordMicro" type="continuation" title="Review New Information Submission"
        uri="IRB_v01r00b00_UPcoordReview"  tabset="coordSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="New Information Sent to Coordinator"
        descriptionNext="New Information Being Processed"
        
        passToMicroCoord="1"
        microOnly="1"
        op="problemOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review New Information submission.</instructions>
        
        <route type="choice"  fragment="up_reviseCoord"
        condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Estalished Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <fragment id="up_respondToRSCoord" type="continuation" title="Revise IRB Protocol" 
        uri="IRB_v01r00b00_UPreviseAdminRS"  tabset="RSSetUP.xml"  tabsetContainer="up_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="New Information Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned=""
        linkedOpStatus="revisions"
        passToCoord=""
        op="problemOp" 
        >
        
        <instructions>The New Information submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static" fragment="up_returnToCoordReview"/>
    </fragment>
    
    
    <!-- Analyst RTP -->
    <fragment id="up_reviseCoord" type="continuation" title="Revise New Information" 
        uri="IRB_v01r00b00_UPreviseAdminRS"  tabset="RSSetUP.xml"  tabsetContainer="up_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="New Information Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned="1"
        op="problemOp" 
        linkedOpStatus="revisions"
        
        >
        
        <instructions>The Initial Application submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static"  fragment="up_returnToCoordReview"/>
    </fragment>
    
    <fragment id="up_returnToCoordReview" type="continuation" title="Review New Information Submission"
        uri="IRB_v01r00b00_UPcoordReview"  tabset="coordSetUPREVRS.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        returnedBack="1"
        returnedBackRS="1"
        
        
        instruction=""
        descriptionLast="New Information Returned to Coordinator"
        descriptionNext="New Information Being Processed"
        
        op="problemOp" 
        linkedOpStatus="adminReview"
        passToCoord="1"
        >
        
        <instructions>Review changes the New Information submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice" fragment="up_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="up_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="up_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    

    <fragment id="up_returnToCoord" type="continuation" title="Review New Information Submission"
        uri="IRB_v01r00b00_UPcoordReview"  tabset="coordSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="New Information Returned to Coordinator"
        descriptionNext="New Information Being Processed"
        returned="1"
        
        returnedBack="1"
        returnedBackRS=""
        
        passToCoord="1"
        op="problemOp" 
        linkedOpStatus="adminReview">
                
        <instructions>Review New Information submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        <route type="choice" fragment="up_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="up_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="up_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="up_sendToDirector" type="continuation" title="Please Handle the New Information Submission"
        uri="IRB_v01r00b00_UPdirectorReview"  tabset="directorSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="New Information Escalated to Director"
        descriptionNext="New Information Being Processed"
        
        passToDirector="1"        
        op="problemOp" 
        linkedOpStatus="directorReview">
        
        
        <instructions>The Initial Application submission has been escalated by the previous administrator, please review.</instructions>
        
        <route type="choice"  fragment="up_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="up_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="up_reviseDirector" type="continuation" title="Revise New Information" 
        uri="IRB_v01r00b00_UPreviseAdminRS"  tabset="RSSetUP.xml"  tabsetContainer="up_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="New Information Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        op="problemOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="up_returnToDirector"/>
    </fragment>

    <fragment id="up_returnToDirector" type="continuation" title="Please Handle the New Information Submission"
        uri="IRB_v01r00b00_UPdirectorReview"  tabset="directorSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        
        
        instruction=""
        descriptionLast="New Information Returned to Director"
        descriptionNext="New Information Being Processed"
        
        returnedBack ="1"
        returnedBackRS="1"
        
        
        op="problemOp" 
        linkedOpStatus="directorReview"
        passToDirector="1"
        >
        
        <instructions>Review changes/return the New Information Submission.</instructions>
        
        <route type="choice"  fragment="up_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="up_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    <fragment id="up_sendToDirectorFromIntake" type="continuation" title="Please Handle the New Information Submission"
        uri="IRB_v01r00b00_UPdirectorReview"  tabset="directorSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="New Information Escalated to Director"
        descriptionNext="New Information Being Processed"
        
        passToDirector="1"
        op="problemOp" 
        linkedOpStatus="directorReview">
        
        <instructions>The New Information submission has been escalated by intake, please review.</instructions>
        
        <route type="choice"  fragment="up_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="up_sendToIntakeReturned"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="up_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>

    </fragment>
    
    <fragment id="up_reviseDirectorFromIntake" type="continuation" title="Revise New Information" 
        uri="IRB_v01r00b00_UPreviseAdmin"  tabset="reviseSetUP.xml"  tabsetContainer="UPreviseAdminTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="New Information Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        op="problemOp" 
        linkedOpStatus="revisions"
        passToDirector="1"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="up_returnToDirectorFromIntake"/>
    </fragment>
    
    <fragment id="up_returnToDirectorFromIntake" type="continuation" title="Please Handle the New Information Submission"
        uri="IRB_v01r00b00_UPdirectorReview"  tabset="directorSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        returnedBack ="1"
        returnedBackRS="1"
        
        
        passToDirector="1"
        
        instruction=""
        descriptionLast="New Information Returned to Director"
        descriptionNext="New Information Being Processed"
        
        op="problemOp" 
        linkedOpStatus="directorReview"
        >
        
        <instructions>Review changes/return the New Information Submission.</instructions>
        
        <route type="choice"  fragment="up_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="up_sendToIntake"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="up_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>
    </fragment>
     
    
    
    <!--<fragment id="up_respondToRS" type="continuation" title="Modifications Required for New Information" uri="IRB_v01r00b00_UPreviseRS"  tabset="up_piRS.xml"  tabsetContainer="up_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" continuationUserType="ownerIn"
        continuationUser="" op="problemOp" instruction="" descriptionLast="New Information Response Submission Sent to PI"
        descriptionNext="Modifications Required">
        <!-\- Might change the status to "In Revision" or something like that -\->
        <route type="static" fragment="up_reviewRS"/>
    </fragment>-->
    
    <fragment id="up_reviewRS" type="continuation" title="Review New Information Revisions"
        uri="IRB_v01r00b00_UPReviewRS"  tabset="up_returnedRS.xml"  tabsetContainer="up_reviewTabsRS.xfrm" launcherRole="admin" continuationRole="reviewer"
        continuationUserType="namedRole" continuationUser="centralAdmin" op="problemOp" instruction=""
        descriptionLast="New Information Revisions Complete"
        descriptionNext="New Information Revisions being Reviewed" newStatus="deptReview">
        
        <route type="choice" fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'"/>
        
        <route type="choice" fragment="up_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/>
        
        <route type="choice" fragment="up_sendToBoard"
        condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0'"/>  
        
        <!-- Probably include a different sendback segment just with different language here (so the lifecycle history reads better), but send back to the same fragment -->
        <route type="choice" fragment="up_respondToRS" condition="data.getValue('passFail') == '0';"/>
    </fragment>

    <fragment id="up_determineProtocol" type="end" title="Render Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="problemOp" instruction="" descriptionLast="New Information Reviewed"
        descriptionNext="New Information Reviewed" linkedOpStatus="active" linkedOpHandler="unantiprob_calculateDecision.js"> </fragment>

    <fragment id="up_determineProtocolMicro" type="end" title="Render Micro Office Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="problemOp" instruction="" descriptionLast="Review determination set by Micro office"
        descriptionNext="New Information Awaiting IRB Response Submission Review" linkedOpHandler="unantiprob_calculateDecisionMicro.js" ></fragment>

    <fragment id="up_sendToBoard" type="end" title="Decide on New Information"
        uri="IRB_v01r00b00_UPboardReview"  tabset="up_boardSet.xml"  tabsetContainer="up_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="problemOp" instruction=""
        descriptionLast="New Information Sent to Board Meeting"
        descriptionNext="New Information Awaiting Review by Board"
        linkedOpStatus="boardReview" linkedOpHandler="up_sendToBoard.js">
        <!--<route type="static" fragment="end"/>-->
    </fragment>

    <fragment id="up_sendToBoardMicro" type="end" title="Decide on New Information"
        uri="IRB_v01r00b00_UPboardReview"  tabset="up_boardSet.xml"  tabsetContainer="up_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="problemOp" instruction=""
        descriptionLast="New Information Sent to Board Meeting"
        descriptionNext="New Information Awaiting Review by Board" linkedOpStatus="boardReview"
        >
    </fragment><!-- linkedOpHandler="ren_sendToBoardMicro.js" -->
    
    <!--<fragment id="up_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_UPcentralReturn" launcherRole="board" continuationRole="reviewer"
        continuationUserType="coor" op="problemOp" instruction=""
        descriptionLast="Board Review Complete" descriptionNext="Results Being Processed"
        linkedOpStatus="processingBoardRev">
        <route type="choice" fragment="up_respondToRS"
            condition="(data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/> <!-\- This one sends out the Reponse submision as in the central review if there is no board meeting -\->
        <route type="choice" fragment="up_establishProtocol" condition="data.getValue('decision') != 'mod'"/>  
         </fragment>-->


    <fragment id="up_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_UPcoordReview"  tabset="coordSetUP.xml"  tabsetContainer="UPReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="SENDER"
        
        returnedBack="1"
        returnedBackRS="1"
        
        
        instruction=""
        descriptionLast="Board Review Complete" descriptionNext="Results Being Processed"
        
        op="problemOp" 
        linkedOpStatus="adminReview"
        passToCoord="1"
        >
        
        <instructions>Review board decision on the New Information Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
<!--        <route type="choice"  fragment="up_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>-->
        
        <route type="choice"  fragment="up_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="up_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="up_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Estalished Determining Review"/>
        
        <route type="choice"  fragment="up_respondToRSCoord"
        condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="up_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="up_establishProtocol" type="end" title="Activate" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="problemOp" instruction=""
        descriptionLast="New Information Established"
        descriptionNext="New Information Active" linkedOpStatus="active" linkedOpHandler="unantiprob_establish.js"> </fragment>

    <fragment id="up_leaveProtocol" type="end" title="Deferred" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="problemOp" instruction="" descriptionLast="New Information Deferred"
        descriptionNext="New Information Waiting for Next Board Meeting"
        linkedOpStatus="deferred"> </fragment>

    <fragment id="up_rejectProtocol" type="end" title="Declined" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="problemOp" instruction="" descriptionLast="New Information Declined"
        descriptionNext="New Information Not Established" linkedOpStatus="rejected"> </fragment>


    <!-- External Review Step - Standalone Adhoc Fragment(s) -->
    <fragment id="up_externalRev" type="linkedOpRev" title="Review New Information"
        uri="IRB_v01r00b00_UPdeptReview" tabset="up_reviewSet.xml" tabsetContainer="up_reviewTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="special" continuationUser="centralAdmin" op="problemOp" instruction=""
        descriptionLast="" linkedOpStatus="externalReview"
        descriptionNext="New Information Sent for Review"> </fragment>







<!-- FINAL REPORT - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    
    <!-- Available action for PI when status = ACTIVE/APPROVED -->
    <fragment id="finalrep" type="linkedOp" title="Create Final Report"
        uri="IRB_v01r00b00_FRcreateNew"  tabset="finalReportTabs.xml"  tabsetContainer="finalReportTabs.xfrm" 
        
        op="finrepOp"
        linkedWhen="active"
        launchLabel="Create Final Report"
        launchMessage="Are you sure you want to create a Final Report?"
        
        linkedOpHandler="finalrepCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Final Report" 
        descriptionLast="" descriptionNext="Final Report">
        
        <route type="choice" fragment="fr_sendToIntake"
            condition="(this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId || this.hasAccess('SIGNAUTH'));"/>
        
        <route type="choice" fragment="fr_sendToPI"
            condition="this.hasAccess('EDIT')"/>
    </fragment>
    
    <fragment id="fr_sendToPI" type="continuation" title="Review Final Report"
        uri="IRB_v01r00b00_FRpiReview"  tabset="finalReportTabs.xml"  tabsetContainer="finalReportTabs.xfrm"
        launcherRole="" continuationRole="Admin"
        continuationUserType="pi"
        assignmentHandler=""
        
        instruction=""
        descriptionLast="Final Report Sent to Intake"
        descriptionNext="Final Report PI Sign-Off"
        createVersion="" 
        passToIntake=""
        op="finrepOp" 
        linkedOpStatus="piReview">
        
        <route type="static" fragment="fr_sendToIntake"/>
        
    </fragment>
    
    <!-- Available action for PI when status = EXPIRED -->
    <fragment id="finalrep_exp" type="linkedOp" title="Create Final Report"
        uri="IRB_v01r00b00_FRcreateNew"  tabset="finalReportTabs.xml"  tabsetContainer="finalReportTabs.xfrm" 
        
        op="finrepOp"
        linkedWhen="expired"
        launchLabel="Create Final Report"
        launchMessage="Are you sure you want to create a Final Report?"
        
        linkedOpHandler="finalrepCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Final Report" 
        descriptionLast="" descriptionNext="Final Report">
        
        <route type="static" fragment="fr_sendToIntake"/>
    </fragment>   
    
    <!-- Available action for PI when status = SUSPENDED -->
    <fragment id="finalrep_susp" type="linkedOp" title="Create Final Report"
        uri="IRB_v01r00b00_FRcreateNew"  tabset="finalReportTabs.xml"  tabsetContainer="finalReportTabs.xfrm" 
        
        op="finrepOp"
        linkedWhen="suspended"
        launchLabel="Create Final Report"
        launchMessage="Are you sure you want to create a Final Report?"
        
        linkedOpHandler="finalrepCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Final Report" 
        descriptionLast="" descriptionNext="Final Report">
        
        <route type="static" fragment="fr_sendToIntake"/>
    </fragment>   
    <fragment id="finalrep_term" type="linkedOp" title="Create Final Report"
        uri="IRB_v01r00b00_FRcreateNew"  tabset="finalReportTabs.xml"  tabsetContainer="finalReportTabs.xfrm" 
        
        op="finrepOp"
        linkedWhen="terminated"
        launchLabel="Create Final Report"
        launchMessage="Are you sure you want to create a Final Report?"
        
        linkedOpHandler="finalrepCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Final Report" 
        descriptionLast="" descriptionNext="Final Report">
        
        <route type="static" fragment="fr_sendToIntake"/>
    </fragment>
    <!-- Available action for PI when status = DEVONLY -->
    <fragment id="finalrep_DEVONLY" type="linkedOp" title="Create Final Report"
        uri="IRB_v01r00b00_FRcreateNew"  tabset="finalReportTabs.xml"  tabsetContainer="finalReportTabs.xfrm" 
        
        op="finrepOp"
        linkedWhen="DEVONLY"
        launchLabel="Create Final Report"
        launchMessage="Are you sure you want to create a Final Report?"
        
        linkedOpHandler="finalrepCreateDataSrc.js"
        linkedOpStatus="inDev" 
        
        launcherRole="PI"
        instruction=""
        description="Create Final Report" 
        descriptionLast="" descriptionNext="Final Report">
        
        <route type="static" fragment="fr_sendToIntake"/>
    </fragment>   
    
    <!-- First Review -->
    <!--<fragment id="fr_sendToDeptRev" type="continuation" title="Review Final Report"
        uri="IRB_v01r00b00_UPdeptReview" 
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDeptReviewer.js"
        
        instruction=""
        descriptionLast="PI Initiated Final Report"
        descriptionNext="Final Report Sent for Departmental Review" 
        
        op="finrepOp" 
        linkedOpStatus="deptReview"
        linkedOpHandler="finalrepCreateReview.js">

        <route type="choice" fragment="fr_sendToCentralAdmin"
                condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="fr_revise"
                condition="data.getValue('passFail') == '0';"/>
    </fragment>

    <!-\- First Review (Requires Revision) -\->
    <fragment id="fr_revise" type="continuation" title="Revise Final Report"
        uri="IRB_v01r00b00_UPrevise" 
        launcherRole="reviewer" continuationRole="ContactPI"
        continuationUserType="owner" 
        
        instruction=""
        descriptionLast="Final Report Requires Revision"
        descriptionNext="Departmental Revisions Required" 
        
        op="finrepOp" 
        linkedOpStatus="revisions"
        linkedOpHandler="finalrep_advanceSubReview.js">
        
        <route type="static" fragment="fr_sendToRevRev"/>
    </fragment>

    <!-\- First Review (Review Revisions, Suggest Further Changes or Accept) -\->
    <fragment id="fr_sendToRevRev" type="continuation" title="Review Final Report Revisions" 
        uri="IRB_v01r00b00_UPReviewReview"
        launcherRole="admin" continuationRole="reviewer"
        assignmentHandler="assignDeptReviewer.js"
        
        instruction=""
        descriptionLast="Final Report Revisions Complete"
        descriptionNext="Final Report Revisions being Reviewed" 
        
        op="finrepOp" 
        linkedOpStatus="deptReview">

        <route type="choice" fragment="fr_sendToCentralAdmin"
                condition="data.getValue('passFail') == '1';"/>
        <route type="choice" fragment="fr_revise" 
                condition="data.getValue('passFail') == '0';"/>
    </fragment>


    <!-\- Central Review / Intake - Assigns Next Steps, including Reassignment (to a different Coordinator) -\->
    <fragment id="fr_sendToCentralAdmin" type="continuation" title="Process Final Report Submission"
        uri="IRB_v01r00b00_UPcentralReview" 
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="Final Report Sent to Central Admin"
        descriptionNext="Final Report Being Processed"
        
        op="finrepOp"
        linkedOpStatus="routing"
        linkedOpHandler="finalrep_promoteSubReview.js"
        
        passToIntake="1">

        <route type="choice" fragment="fr_ReassignCentralAdmin"
                condition="data.getValue('newCoor[last()]') == '1'"/>
        <route type="choice" fragment="fr_determineProtocol"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="fr_respondToRS"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="fr_sendToBoard"
                condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
    </fragment>

    <!-\- Central Review / Intake (when reassigned) - Assigns Next Steps, including Reassignment (to a different Coordinator) -\->
    <fragment id="fr_ReassignCentralAdmin" type="continuation" title="Process Final Report Submission" 
        uri="IRB_v01r00b00_UPcentralReview"
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Final Report Reassigned to Different Central Admin"
        descriptionNext="Final Report Being Processed" 
        
        op="finrepOp" 
        linkedOpStatus="routing">

        <route type="choice" fragment="fr_ReassignCentralAdmin"
                condition="data.getValue('newCoor[last()]') == '1'"/>
        <route type="choice" fragment="fr_determineProtocol"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="fr_respondToRS"
                condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF') &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
        <route type="choice" fragment="fr_sendToBoard"
                condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('newCoor[last()]') != '1'"/>
   </fragment>
-->

    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="fr_sendToIntake" type="continuation" title="Assign Final Report to a Analyst"
        uri="IRB_v01r00b00_FRintakeReview"  tabset="intakeSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        createVersion="1" 
        instruction=""
        descriptionLast="Final Report Sent to Intake"
        descriptionNext="Final Report Being Processed"
        updateReceiptDate="1"
        passToIntake="1"
        op="finrepOp" 
        linkedOpStatus="intakeReview">
                
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="fr_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="fr_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="fr_sendToIntakeMicro" type="continuation" title="Assign Final Report to a Analyst"
        uri="IRB_v01r00b00_FRintakeReview"  tabset="intakeSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"        
        instruction=""
        descriptionLast="Final Report Sent to Intake"
        descriptionNext="Final Report Being Processed"
        
        op="finrepOp" 
        passToMicroIntake="1"    
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="fr_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoordMicro"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="fr_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <fragment id="fr_sendToIntakeReturned" type="continuation" title="Assign Final Report to a Analyst"
        uri="IRB_v01r00b00_FRintakeReview"  tabset="intakeSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="Final Report Sent to Intake"
        descriptionNext="Final Report Being Processed"
        
        passToIntake="1"
        op="finrepOp" 
        linkedOpStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice"  fragment="fr_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="fr_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    <!-- uri="IRB_v01r00b00_FRreviseAdmin"  tabset="reviseSetFR.xml"  tabsetContainer="FRreviseAdminTabs.xfrm" -->
    <fragment id="fr_reviseIntake" type="continuation" title="Revise Final Report" 
        uri="IRB_v01r00b00_FRreviseAdminRS"  tabset="RSSetFR.xml"  tabsetContainer="fr_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Final Report Requires Revision"
        descriptionNext="Intake Revisions Required"
        returned="1"
        op="finrepOp" 
        linkedOpStatus="revisions">
        
        <instructions>The Initial Application submission has been returned for revisions by intake, please resubmit.</instructions>
        
        <route type="static"  fragment="fr_returnToIntake"/>
    </fragment>
    <!-- JF:  3/10/17 RITDEV-79 Allow Intake role to use Return to PI action (change returnBackRS to 0)-->
    <!-- AB:  7/10/17 RITDEV-751 Made Return to PI from intake work  -->
    <fragment id="fr_returnToIntake" type="continuation" title="Review changes and Assign Final Report to an Analyst"
        uri="IRB_v01r00b00_FRintakeReview"  tabset="intakeSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="Final Report Returned to Intake"
        descriptionNext="Final Report Being Processed"
        
        assignmentHandler="assignIntake.js"
        
        returnedBack="1"
        passToIntake="1"
        op="finrepOp" 
        linkedOpStatus="intakeReview"
        returnedBackRS="0">
                
        <instructions>Review changes and Assign Final Report to a Analyst</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice"  fragment="fr_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="fr_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    
    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="fr_sendToCoord" type="continuation" title="Review Final Report Submission"
        uri="IRB_v01r00b00_FRcoordReview"  tabset="coordSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="Final Report Sent to Coordinator"
        descriptionNext="Final Report Being Processed"
        
        passToCoord="1"        
        op="finrepOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="fr_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="fr_sendToIntakeMicro"
            condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="fr_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    <fragment id="fr_sendToCoordMicro" type="continuation" title="Review Final Report Submission"
        uri="IRB_v01r00b00_FRcoordReview"  tabset="coordSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="Final Report Sent to Coordinator"
        descriptionNext="Final Report Being Processed"
        
        passToMicroCoord="1"
        microOnly="1"
        op="finrepOp" 
        linkedOpStatus="adminReview">
        
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    <!-- Analyst RTP -->
    <fragment id="fr_reviseCoord" type="continuation" title="Revise Final Report" 
        uri="IRB_v01r00b00_FRreviseAdminRS"  tabset="RSSetFR.xml"  tabsetContainer="fr_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Final Report Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned="1"
        op="finrepOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static"  fragment="fr_returnToCoordReview"/>
    </fragment>
    <fragment id="fr_respondToRSCoord" type="continuation" title="Revise Final Report" 
        uri="IRB_v01r00b00_FRreviseAdminRS"  tabset="RSSetUP.xml"  tabsetContainer="fr_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Final Report Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned=""
        linkedOpStatus="revisions"
        passToCoord=""
        op="finrepOp" 
        >
        
        <instructions>The Final Report submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static" fragment="fr_returnToCoordReview"/>
    </fragment>
    <fragment id="fr_returnToCoordReview" type="continuation" title="Review Final Report Submission"
        uri="IRB_v01r00b00_FRcoordReview"  tabset="coordSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Final Report Returned to Coordinator"
        descriptionNext="Final Report Being Processed"
        returnedBack="1"
        op="finrepOp" 
        linkedOpStatus="adminReview"
        returnedBackRS="1"
        
        passToCoord="1"
        >
        
        <instructions>Review changes to the Final Report Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        <route type="choice" fragment="fr_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="fr_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="fr_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    

    <fragment id="fr_returnToCoord" type="continuation" title="Review Final Report Submission"
        uri="IRB_v01r00b00_FRcoordReview"  tabset="coordSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="lcoor"
        
        instruction=""
        descriptionLast="Final Report Returned to Coordinator"
        descriptionNext="Final Report Being Processed"
        returned="1"
        passToCoord="1"
        op="finrepOp" 
        linkedOpStatus="adminReview"
        returnedBack ="1"
        returnedBackRS=""
        >
                
        <instructions>Review IRB Protocol Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        <route type="choice" fragment="up_sendToIntakeMicro"
        condition="data.getValue('passFail') == '5'" action="Assigned Offices"/>
        
        <route type="choice"  fragment="fr_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="fr_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="fr_sendToDirector" type="continuation" title="Please Handle the Final Report Submission"
        uri="IRB_v01r00b00_FRdirectorReview"  tabset="directorSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Final Report Escalated to Director"
        descriptionNext="Final Report Being Processed"
        
        passToDirector="1"        
        op="finrepOp" 
        linkedOpStatus="directorReview">
        
        
        <instructions>The Initial Application submission has been escalated by the previous administrator, please review.</instructions>
        
        <route type="choice"  fragment="fr_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="fr_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="fr_reviseDirector" type="continuation" title="Revise Final Report" 
        uri="IRB_v01r00b00_FRreviseAdminRS"  tabset="RSSetFR.xml"  tabsetContainer="fr_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Final Report Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        op="finrepOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="fr_returnToDirector"/>
    </fragment>

    <fragment id="fr_returnToDirector" type="continuation" title="Please Handle the Final Report Submission"
        uri="IRB_v01r00b00_FRdirectorReview"  tabset="directorSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Final Report Returned to Director"
        descriptionNext="Final Report Being Processed"
        returnedBack="1"
        op="finrepOp" 
        linkedOpStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="fr_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice"  fragment="fr_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    <fragment id="fr_sendToDirectorFromIntake" type="continuation" title="Please Handle the Final Report Submission"
        uri="IRB_v01r00b00_FRdirectorReview"  tabset="directorSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Final Report Escalated to Director"
        descriptionNext="Final Report Being Processed"
        
        passToDirector="1"
        op="finrepOp" 
        linkedOpStatus="directorReview">
        
        <instructions>The Initial Application submission has been escalated by intake, please review.</instructions>
        
        <route type="choice"  fragment="fr_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="fr_sendToIntakeReturned"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="fr_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>

    </fragment>
    
    <fragment id="fr_reviseDirectorFromIntake" type="continuation" title="Revise Final Report" 
        uri="IRB_v01r00b00_FRreviseAdmin"  tabset="reviseSetFR.xml"  tabsetContainer="FRreviseAdminTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="ownerIn"
        instruction="" 
        descriptionLast="Final Report Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        op="finrepOp" 
        linkedOpStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static"  fragment="fr_returnToDirectorFromIntake"/>
    </fragment>
    
    <fragment id="fr_returnToDirectorFromIntake" type="continuation" title="Please Handle the Final Report Submission"
        uri="IRB_v01r00b00_FRdirectorReview"  tabset="directorSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="Final Report Returned to Director"
        descriptionNext="Final Report Being Processed"
        returnedBack="1"
        op="finrepOp" 
        linkedOpStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the IRB Protocol Submission.</instructions>
        
        <route type="choice"  fragment="fr_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice"  fragment="fr_sendToIntake"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice"  fragment="fr_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>
    </fragment>

    <!--<fragment id="fr_respondToRS" type="continuation" title="Modifications Required for Final Report" uri="IRB_v01r00b00_FRreviseRS"  tabset="fr_piRS.xml"  tabsetContainer="fr_reviseTabsRS.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" continuationUserType="ownerIn"
        continuationUser="" op="finrepOp" instruction="" descriptionLast="Final Report Response Submission Sent to PI"
        descriptionNext="Modifications Required">
        <!-\- Might change the status to "In Revision" or something like that -\->
        <route type="static" fragment="fr_reviewRS"/>
    </fragment>-->
    
    <fragment id="fr_reviewRS" type="continuation" title="Review Final Report Revisions"
        uri="IRB_v01r00b00_FRReviewRS"  tabset="fr_returnedRS.xml"  tabsetContainer="fr_reviewTabsRS.xfrm" launcherRole="admin" continuationRole="reviewer"
        continuationUserType="namedRole" continuationUser="centralAdmin" op="finrepOp" instruction=""
        descriptionLast="Final Report Revisions Complete"
        descriptionNext="Final Report Revisions being Reviewed" newStatus="deptReview">
        
        <route type="choice" fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'"/>
        
        <route type="choice" fragment="fr_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/>
        
        <route type="choice" fragment="fr_sendToBoard"
        condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0'"/>  
        
        <!-- Probably include a different sendback segment just with different language here (so the lifecycle history reads better), but send back to the same fragment -->
        <route type="choice" fragment="fr_respondToRS" condition="data.getValue('passFail') == '0';"/>
    </fragment>    

    <fragment id="fr_determineProtocol" type="end" title="Render Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="finrepOp" instruction="" descriptionLast="Final Report Reviewed"
        descriptionNext="Final Report Reviewed" linkedOpHandler="finalrep_calculateDecision.js" linkedOpStatus="active"> </fragment>

    <fragment id="fr_determineProtocolMicro" type="end" title="Render Micro Office Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="finrepOp" instruction="" descriptionLast="Review determination set by Micro office"
        descriptionNext="Final Report Awaiting IRB Response Submission Review" linkedOpHandler="finalrep_calculateDecisionMicro.js" ></fragment>

    <fragment id="fr_sendToBoard" type="end" title="Decide on Final Report"
        uri="IRB_v01r00b00_FRboardReview"  tabset="fr_boardSet.xml"  tabsetContainer="fr_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="finrepOp" instruction=""
        descriptionLast="Final Report Sent to Board Meeting"
        descriptionNext="Final Report Awaiting Review by Board" linkedOpStatus="boardReview"
        linkedOpHandler="fr_sendToBoard.js"> </fragment>

    <fragment id="fr_sendToBoardMicro" type="end" title="Decide on Final Report"
        uri="IRB_v01r00b00_FRboardReview"  tabset="fr_boardSet.xml"  tabsetContainer="fr_boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" op="finrepOp" instruction=""
        descriptionLast="Final Report Sent to Board Meeting"
        descriptionNext="Final Report Awaiting Review by Board" linkedOpStatus="boardReview"
        >
    </fragment><!-- linkedOpHandler="fr_sendToBoardMicro.js" -->
    <!--<fragment id="fr_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_FRcentralReturn" launcherRole="board" continuationRole="reviewer"
        continuationUserType="coor" op="finrepOp" instruction=""
        descriptionLast="Board Review Complete" descriptionNext="Results Being Processed"
        linkedOpStatus="processingBoardRev">
        <route type="choice" fragment="fr_respondToRS"
            condition="(data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')"/> <!-\- This one sends out the Reponse submision as in the central review if there is no board meeting -\->
        <route type="choice" fragment="fr_establishProtocol" condition="data.getValue('decision') != 'mod'"/>  
        
    </fragment>-->

    <fragment id="fr_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_FRcoordReview"  tabset="coordSetFR.xml"  tabsetContainer="FRReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="SENDER"
        
        instruction=""
        descriptionLast="Board Review Complete" descriptionNext="Results Being Processed"
        returnedBack="1"
        op="finrepOp" 
        linkedOpStatus="adminReview"
        returnedBackRS="1"
        
        passToCoord="1"
        >
        
        <instructions>Review board decision on the Final Report Submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
<!--        <route type="choice"  fragment="fr_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>-->
        
        <route type="choice"  fragment="fr_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice"  fragment="fr_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice"  fragment="fr_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice"  fragment="fr_respondToRSCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice"  fragment="fr_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="fr_establishProtocol" type="end" title="Activate" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" op="finrepOp" instruction=""
        descriptionLast="Final Report Established" descriptionNext="Final Report Active"
        linkedOpStatus="active" linkedOpHandler="finalrep_establish.js"> </fragment>

    <fragment id="fr_leaveProtocol" type="end" title="Deferred" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="finrepOp" instruction="" descriptionLast="Final Report Deferred"
        descriptionNext="Final Report Waiting for Next Board Meeting" linkedOpStatus="deferred">
        <!--newStatus="deferred"  linkedOpHandler="defer.js"-->
    </fragment>

    <fragment id="fr_rejectProtocol" type="end" title="Declined" uri="" launcherRole="CentralAdmin"
        continuationRole="reviewer" continuationUserType="board" continuationUser="dynamic"
        op="finrepOp" instruction="" descriptionLast="Final Report Declined"
        descriptionNext="Final Report Not Established" linkedOpStatus="rejected">
        <!-- newStatus="rejected"  linkedOpHandler="decline.js"-->
    </fragment>


    <!-- External Review Step - Standalone Adhoc Fragment(s) -->
    <fragment id="fr_externalRev" type="linkedOpRev" title="Review Final Report"
        uri="IRB_v01r00b00_FRdeptReview" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="special" continuationUser="centralAdmin" op="finrepOp" instruction=""
        descriptionLast="" linkedOpStatus="externalReview"
        descriptionNext="Final Report Sent for Review"> </fragment>
<!-- OTEU - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->    
    
    <fragment id="createNewScreen" type="create" title="Create One Time Emergency Use" uri="IRB_v01r00b00_createNewScreen"  tabset="createTabsScreen.xml"  tabsetContainer="createTabsO.xfrm"
        launcherRole="Admin" instruction="" description="">
        
        <!--<route type="static" fragment="oteu_sendToIntake"/>-->
        
        <!--<route type="choice" fragment="oteu_sendToIntake"
            condition="this.tDat.getValue('Person[role=\'PI\']/creatorIsPI') == '1';"/>
        <route type="choice" fragment="oteu_authorize"
            condition="this.tDat.getValue('Person[role=\'PI\']/creatorIsPI') != '1';"/>-->
        
        <route type="choice" fragment="oteu_sendToIntake"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId;"/>
        <route type="choice" fragment="oteu_authorize"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') != Host.getCurrentUser().userId;"/>
    </fragment>

    <!--<fragment id="createNew" type="create" title="Create IRB Protocol" 
        uri="IRB_v01r00b00_createNew"
        
        launcherRole="Admin" instruction="" description="">
        
        <route type="static" fragment="sendToDeptRev"/>
        
        <route type="choice" fragment="sendToDeptRev"
            condition="this.tDat.getValue('Person[role=\'PI\']/creatorIsPI') == '1';"/>
        <route type="choice" fragment="authorize"
            condition="this.tDat.getValue('Person[role=\'PI\']/creatorIsPI') != '1';"/>
    </fragment>-->
    
    <!-- PI Authorization for Proxy -->
    <fragment id="oteu_authorize" type="continuation" title="Submit One Time Emergency Use"
        uri="IRB_v01r00b00_submitOTEU"  tabset="createTabsScreen.xml"  tabsetContainer="createTabsO.xfrm" launcherRole="admin" continuationRole="pi"
        continuationUserType="pi" continuationUser="dynamic" instruction="Authorize the One Time Emergency Use"
        descriptionLast="One Time Emergency Use Development Completed by Proxy"
        descriptionNext="One Time Emergency Use Pushed to PI for submission">
        
        <!--<route type="static" fragment="oteu_sendToIntake"/>-->
        
        <route type="choice" fragment="oteu_sendToIntake"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId &amp;&amp; data.getValue('path') == 'authorized'"/>
        
        <route type="choice" fragment="oteu_reject"
            condition="this.tDat.getValue('Person[role=\'PI\']/@uid') == Host.getCurrentUser().userId &amp;&amp; data.getValue('path') != 'authorized'"/>
        
        <route type="choice" fragment="oteu_authorize"
        condition="this.tDat.getValue('Person[role=\'PI\']/@uid') != Host.getCurrentUser().userId;"/>
        
        
        
        <!--<route type="choice" fragment="oteu_sendToIntake"
        condition="data.getValue('path') == 'authorized'"/>
        
        <route type="choice" fragment="oteu_reject"
            condition="data.getValue('path') != 'authorized'"/>-->
        
    </fragment>

    <fragment id="oteu_reject" type="end" title="OTEU Rejected" instruction=""
        descriptionLast="PI decided not to submit"
        descriptionNext="PI decided not to submit"
        newStatus="withdrawn" linkedOpHandler="withdraw.js">
    </fragment>


    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="oteu_sendToIntake" type="continuation" title="Assign One Time Emergency Use to a Coordinator"
        uri="IRB_v01r00b00_OTEUintakeReview"  tabset="intakeSetO.xml"  tabsetContainer="OTEUReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        createVersion="1"
        instruction=""
        descriptionLast="One Time Emergency Use Sent to Intake"
        descriptionNext="One Time Emergency Use Being Processed"
        
        passToIntake="1"
        updateReceiptDate="1"
        newStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice" fragment="oteu_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="oteu_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>

    <fragment id="oteu_sendToIntakeReturned" type="continuation" title="Assign One Time Emergency Use to a Coordinator"
        uri="IRB_v01r00b00_OTEUintakeReview"  tabset="intakeSetO.xml"  tabsetContainer="OTEUReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignIntake.js"
        
        instruction=""
        descriptionLast="One Time Emergency Use Sent to Intake"
        descriptionNext="One Time Emergency Use Being Processed"
        
        passToIntake="1"
        
        newStatus="intakeReview">
        
        <instructions>Please select an administrator or suggest revisions for the PI</instructions>
        
        <route type="choice" fragment="oteu_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="oteu_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>

    <fragment id="oteu_reviseIntake" type="continuation" title="Revise One Time Emergency Use" 
        uri="IRB_v01r00b00_OTEUreviseAdmin"  tabset="reviseSetO.xml"  tabsetContainer="OTEUreviseAdminTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="One Time Emergency Use Requires Revision"
        descriptionNext="Intake Revisions Required"
        returned="1"
        newStatus="revisions">
        
        <instructions>The One Time Emergency Use submission has been returned for revisions by intake, please resubmit.</instructions>
        
        <route type="static" fragment="oteu_returnToIntake"/>
    </fragment>
    
    <fragment id="oteu_returnToIntake" type="continuation" title="Review changes and Assign One Time Emergency Use to a Analyst"
        uri="IRB_v01r00b00_OTEUintakeReview"  tabset="intakeSetO.xml"  tabsetContainer="OTEUReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        
        instruction=""
        descriptionLast="One Time Emergency Us Returned to Intake"
        descriptionNext="One Time Emergency Us Being Processed"
        
        assignmentHandler="assignIntake.js"
        
        returnedBack="1"
        passToIntake="1"
        newStatus="intakeReview"
        returnedBackRS="0">
        
        <instructions>Review changes and Assign One Time Emergency Use to a Analyst</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice" fragment="oteu_reviseIntake"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="oteu_sendToDirectorFromIntake"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
    </fragment>
    
    <!-- Central Intake - Assigns to a specific Coordinator -->
    <fragment id="oteu_sendToCoord" type="continuation" title="Review One Time Emergency Use Submission"
        uri="IRB_v01r00b00_OTEUcoordReview"  tabset="coordSetO.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coorTODO"
        
        instruction=""
        descriptionLast="One Time Emergency Use to Coordinator"
        descriptionNext="One Time Emergency Use Being Processed"
        
        passToCoord="1"        
        newStatus="adminReview">
        
        <instructions>Review One Time Emergency Use submission.</instructions>
        
        <route type="choice" fragment="oteu_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice" fragment="oteu_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="oteu_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <!--<route type="choice" fragment="oteu_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>-->
        
        <route type="choice" fragment="oteu_reviseCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="oteu_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="oteu_reviseCoord" type="continuation" title="Revise One Time Emergency Use" 
        uri="IRB_v01r00b00_OTEUreviseAdminRS"  tabset="RSSetO.xml"  tabsetContainer="reviseTabsRSO.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="One Time Emergency Use Requires Revision"
        descriptionNext="Administrative Revisions Required"
        returned="1"
        newStatus="revisions"
        >
        
        <instructions>The One Time Emergency Use submission has been returned for revisions by an administrator, please resubmit.</instructions>
        
        <route type="static" fragment="oteu_returnToCoordReview"/>
    </fragment>
    
    <fragment id="oteu_returnToCoordReview" type="continuation" title="Review One Time Emergency Use Submission"
        uri="IRB_v01r00b00_OTEUcoordReview"  tabset="coordSetO.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="One Time Emergency Use Returned to Coordinator"
        descriptionNext="One Time Emergency Use Being Processed"
        returnedBack="1"
        newStatus="adminReview"
        returnedBackRS="1"
        
        passToCoord="1"
        >
        
        <instructions>Review changes the One Time Emergency Use submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice" fragment="oteu_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice" fragment="oteu_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="oteu_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
<!--        <route type="choice" fragment="oteu_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>-->
        
        <route type="choice" fragment="oteu_reviseCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        
        
        <route type="choice" fragment="oteu_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="oteu_returnToCoord" type="continuation" title="Review One Time Emergency Use Submission"
        uri="IRB_v01r00b00_OTEUcoordReview"  tabset="coordSetO.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="coor"
        
        instruction=""
        descriptionLast="IRB Protocol Returned to Coordinator"
        descriptionNext="IRB Protocol Being Processed"
        returned="1"
        passToCoord="1"
        newStatus="adminReview"
        returnedBack ="1"
        returnedBackRS=""
        updateReceiptDate=""
        
        >
        
        <instructions>Review One Time Emergency Use submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
        <route type="choice" fragment="oteu_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Coordinator"/>
        
        <route type="choice" fragment="oteu_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="oteu_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <!--<route type="choice" fragment="oteu_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>-->
        
        <route type="choice" fragment="oteu_reviseCoord"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="oteu_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>

    <fragment id="oteu_sendToDirector" type="continuation" title="Please Handle the One Time Emergency Use Submission"
        uri="IRB_v01r00b00_OTEUdirectorReview"  tabset="directorSetO.xml"  tabsetContainer="OTEUReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="One Time Emergency Use Escalated to Director"
        descriptionNext="One Time Emergency Use Being Processed"
        
        passToDirector="1"        
        newStatus="directorReview">
        
        
        <instructions>The One Time Emergency Use submission has been escalated by the previous administrator, please review.</instructions>
        
        <route type="choice" fragment="oteu_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice" fragment="oteu_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice" fragment="oteu_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="oteu_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="oteu_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    <fragment id="oteu_reviseDirector" type="continuation" title="Revise One Time Emergency Use" 
        uri="IRB_v01r00b00_OTEUreviseAdminRS"  tabset="RSSetO.xml"  tabsetContainer="reviseTabsRSO.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="One Time Emergency Use Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        newStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static" fragment="oteu_returnToDirector"/>
    </fragment>
    
    <fragment id="oteu_returnToDirector" type="continuation" title="Please Handle the One Time Emergency Use Submission"
        uri="IRB_v01r00b00_OTEUdirectorReview"  tabset="directorSetO.xml"  tabsetContainer="OTEUReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="One Time Emergency Use Returned to Director"
        descriptionNext="One Time Emergency Use Being Processed"
        returnedBack="1"
        newStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the One Time Emergency Use submission.</instructions>
        
        <route type="choice" fragment="oteu_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="ReAssigned Analyst"/>
        
        <route type="choice" fragment="oteu_returnToCoord"
            condition="data.getValue('passFail') == '-3'" action="Returned to Administrator"/>
        
        <route type="choice" fragment="oteu_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="oteu_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="oteu_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    <fragment id="oteu_sendToDirectorFromIntake" type="continuation" title="Please Handle the One Time Emergency Use Submission"
        uri="IRB_v01r00b00_OTEUdirectorReview"  tabset="directorSetO.xml"  tabsetContainer="OTEUReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="One Time Emergency Use Escalated to Director"
        descriptionNext="One Time Emergency Use Being Processed"
        
        passToDirector="1"
        newStatus="directorReview">
        
        <instructions>The Initial Application submission has been escalated by intake, please review.</instructions>
        
        <route type="choice" fragment="oteu_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="oteu_sendToIntakeReturned"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice" fragment="oteu_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="oteu_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="oteu_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice" fragment="oteu_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>
        
    </fragment>
    
    <fragment id="oteu_reviseDirectorFromIntake" type="continuation" title="Revise One Time Emergency Use" 
        uri="IRB_v01r00b00_OTEUreviseAdmin"  tabset="reviseSetO.xml"  tabsetContainer="OTEUreviseAdminTabs.xfrm"
        launcherRole="reviewer" continuationRole="ContactPI" 
        continuationUserType="owner"
        instruction="" 
        descriptionLast="One Time Emergency Use Requires Revision"
        descriptionNext="Directors Revisions Required"
        returned="1"
        newStatus="revisions"
        >
        
        <instructions>The Initial Application submission has been returned for revisions by the director, please resubmit.</instructions>
        
        <route type="static" fragment="oteu_returnToDirectorFromIntake"/>
    </fragment>
    
    <fragment id="oteu_returnToDirectorFromIntake" type="continuation" title="Please Handle the One Time Emergency Use Submission"
        uri="IRB_v01r00b00_OTEUdirectorReview"  tabset="directorSetO.xml"  tabsetContainer="OTEUReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        assignmentHandler="assignDirector.js"
        
        instruction=""
        descriptionLast="One Time Emergency Use Returned to Director"
        descriptionNext="One Time Emergency Use Being Processed"
        returnedBack="1"
        newStatus="directorReview"
        returnedBackRS="1"
        
        passToDirector="1"
        >
        
        <instructions>Review changes/return the One Time Emergency Use submission.</instructions>
        
        <route type="choice" fragment="oteu_reviseDirector"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Assigned Analyst"/>
        
        <route type="choice" fragment="oteu_sendToIntake"
            condition="data.getValue('passFail') == '-3'" action="Returned to Intake"/>
        
        <route type="choice" fragment="oteu_determineProtocol"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="oteu_respondToRS"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="oteu_sendToBoard"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
        
        <route type="choice" fragment="oteu_sendToIntake"
            condition="data.getValue('passFail') == '-3'"/>
    </fragment>
    
    
    
    <fragment id="oteu_determineProtocol" type="end" title="Render Decision" uri=""
        launcherRole="CentralAdmin" continuationRole="reviewer" continuationUserType="board"
        continuationUser="dynamic" instruction="" descriptionLast="One Time Emergency Use Reviewed"
        descriptionNext="One Time Emergency Use Reviewed" linkedOpHandler="calculateDecisionOTEU.js"> </fragment>
    
    
    <!-- External Review Step - Standalone Adhoc Fragment(s) -->
    <fragment id="oteu_externalRev" type="linkedOpRev" title="Review One Time Emergency Use"
        uri="IRB_v01r00b00_OTEUdeptReview"  tabset="reviewSetO.xml"  tabsetContainer="ReviewTabsO.xfrm"
        launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="special" continuationUser="centralAdmin"
        
        instruction=""
        descriptionLast=""
        descriptionNext="One Time Emergency Use Sent for Review">
    </fragment>
    
    
    <fragment id="oteu_sendToBoard" type="end" title="Decide on OTEU"
        uri="IRB_v01r00b00_boardReview"  tabset="boardSet.xml"  tabsetContainer="boardTabs.xfrm" launcherRole="CentralAdmin" continuationRole="reviewer"
        continuationUserType="board" continuationUser="dynamic" instruction=""
        descriptionLast="OTEU Sent to Board Meeting"
        descriptionNext="OTEU Awaiting Review by Board" linkedOpHandler="sendToBoardOTEU.js"
        newStatus="boardReview">
    </fragment>
    
    <fragment id="oteu_returnFromBoardReview" type="continuation" title="Process IRB Board Decision"
        uri="IRB_v01r00b00_OTEUcoordReview"  tabset="coordSetO.xml"  tabsetContainer="superAwesomeReviewTabs.xfrm"
        
        launcherRole="prevreviewer" continuationRole="reviewer"
        continuationUserType="SENDER"
        
        instruction=""
        descriptionLast="Board Review Complete"
        descriptionNext="Results Being Processed"
        returned="1"
        passToCoord="1"
        returnedBack ="1"
        returnedBackRS=""
        
        >
        
        <instructions>Review Board Decisions OTEU submission.</instructions>
        
        <!-- linkedOpHandler="calculateDecision.js" -->
        
<!--        <route type="choice" fragment="oteu_reviseCoord"
            condition="data.getValue('passFail') == '0'" action="Returned to PI"/>-->
        
        <route type="choice" fragment="oteu_sendToCoord"
            condition="data.getValue('passFail') == '1'" action="Reassigned to different Administrator"/>
        
        <route type="choice" fragment="oteu_sendToDirector"
            condition="data.getValue('passFail') == '3'" action="Escalated to Director"/>
        
        <route type="choice" fragment="oteu_determineProtocolMicro"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; data.getValue('decision') != 'mod' &amp;&amp; data.getValue('decision') != 'DEF'" action="Established Determining Review"/>
        
        <route type="choice" fragment="oteu_determineProtocolMicro"
            condition="data.getValue('passFail') == 'determiningRev' &amp;&amp; (data.getValue('decision') == 'mod' || data.getValue('decision') == 'DEF')" action="Created Response Submission"/>
        
        <route type="choice" fragment="oteu_sendToBoardMicro"
            condition="data.getValue('passFail') != 'determiningRev' &amp;&amp; data.getValue('passFail') != '0' &amp;&amp; data.getValue('passFail') != '1' &amp;&amp; data.getValue('passFail') != '3'" action="Send to Board"/>
    </fragment>
    
    
    
</routing>
